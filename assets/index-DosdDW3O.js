var oe=Object.defineProperty;var G=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var V=(s,e,t)=>e in s?oe(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,x=(s,e)=>{for(var t in e||(e={}))ne.call(e,t)&&V(s,t,e[t]);if(G)for(var t of G(e))se.call(e,t)&&V(s,t,e[t]);return s};var l=(s,e,t)=>V(s,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(o){if(o.ep)return;o.ep=!0;const n=t(o);fetch(o.href,n)}})();const C={GROWTH_TICK:1e3,MAX_OFFLINE_MS:480*60*1e3,WATER_REGEN_TIME:1500,FARMER_MOVE_INTERVAL:1e3,FARMER_ACTION_INTERVAL:8e3},I={WATER_MAX:4},$={DRAG_THRESHOLD:20},S={HARVEST_WATER_RETURN:3,GOLDEN_MULTIPLIER:2,GOLDEN_CHANCE:.1,COMBO_WINDOW:2e3,COMBO_MIN_SIZE:3,COMBO_GROWTH_BOOST:1.5,NEIGHBOR_BONUS:.25,FARMER_PROXIMITY_BONUS:.5,FARMER_AUTO_WATER_INTERVAL:3e3},B={DIMINISHING_RETURNS:[1,.5,.25,.1],MIN_EFFECTIVENESS:.1},ae={TIER_MULTIPLIERS:{0:1,1:.5,2:2,3:8,4:20,5:1,6:1}},T={FRIEND_TIME:120*1e3,BEST_FRIEND_TIME:300*1e3,SOULMATE_TIME:900*1e3,FRIEND_BOOST:.05,BEST_FRIEND_BOOST:.1,SOULMATE_BOOST:.15,FRIEND_GRIEF:300*1e3,BEST_FRIEND_GRIEF:900*1e3,SOULMATE_GRIEF:1800*1e3},w={ELDER_TIME:600*1e3,ANCIENT_TIME:1800*1e3,LEGENDARY_TIME:3600*1e3,ELDER_AURA_BOOST:.1,ANCIENT_AURA_BOOST:.15,LEGENDARY_AURA_BOOST:.2,MAX_HALL_OF_FAME:5},v={SPAWN_INTERVAL_MIN:45e3,SPAWN_INTERVAL_MAX:6e4,VISIT_DURATION_MIN:15e3,VISIT_DURATION_MAX:2e4,MAX_PLANT_BONUS:.05,SPRING_VISITORS:["ðŸ","ðŸ¦‹","ðŸ¦"],SUMMER_VISITORS:["ðŸ¦‹","ðŸ","ðŸž"],AUTUMN_VISITORS:["ðŸ¿ï¸","ðŸ¦”","ðŸ„"],WINTER_VISITORS:["ðŸ¦","â„ï¸","â›„"]},F={CYCLE_DURATION:7200*1e3,WEATHER_DURATION:300*1e3,PARTICLE_INTERVAL:800,MAX_PARTICLES:15,RAIN_AUTO_WATER_CHANCE:.3},P={gridSize:3,backgroundColor:"#2d5a3d",tileColor:"#8B4513"},R={reactions:{celebrate:"ðŸŽ‰",wave:"ðŸ‘‹",heart:"â¤ï¸",sparkle:"âœ¨"},speechBubbles:{plant:["New friend! ðŸŒ±","Grow strong!","Welcome~","Excited!"],water:["Splash! ðŸ’§","Stay hydrated!","Good drink~","Refreshing!"],grow:["So pretty! ðŸŒ¸","Growing nicely~","Wow!","Look at you!"],evolve:["Evolution! âœ¨","Amazing!","Transformed!","New form!"],harvest:["Wonderful! ðŸŒŸ","Great job!","Amazing!","Well done!"],combo:["On fire! ðŸ”¥","Combo!!","Speed run!","Unstoppable!"],golden:["Shiny! âœ¨","So lucky!","Gold!!","Precious~"],legendary:["LEGENDARY! ðŸ‘‘","Incredible!!","So rare!","Magnificent!"],idle:["Nice day~","La la la~","ðŸŽµ","Peaceful..."],discovery:["New plant! ðŸ“–","Discovery!","Never seen!","Exciting!"]}},O=[{id:"sprout",name:"Sprout",emoji:"ðŸŒ±",description:"The humble beginning. Grows into flowers and herbs.",cost:0,baseGrowthTime:3e4},{id:"acorn",name:"Acorn",emoji:"ðŸŒ°",description:"Slow but mighty. Grows into majestic trees.",cost:150,baseGrowthTime:45e3},{id:"bean",name:"Bean",emoji:"ðŸ«˜",description:"Fast climber. Grows into vines and gourds.",cost:300,baseGrowthTime:25e3},{id:"bulb",name:"Bulb",emoji:"ðŸ§…",description:"Underground magic. Grows roots and exotic blooms.",cost:500,baseGrowthTime:35e3},{id:"spore",name:"Spore",emoji:"ðŸ„",description:"Shade lover. Grows fungi and mysterious plants.",cost:800,baseGrowthTime:4e4},{id:"cactus",name:"Cactus Pip",emoji:"ðŸŒµ",description:"Desert survivor. Grows succulents and hardy plants.",cost:1200,baseGrowthTime:5e4}];function X(s){return O.find(e=>e.id===s)}function H(s){var e,t;return(t=(e=X(s))==null?void 0:e.cost)!=null?t:1/0}function re(s,e,t,i,o){switch(s.type){case"golden":return e.isGolden===!0;case"night_water":return t.nightWaterCount>=s.count;case"combo_water":return t.comboWaterCount>=s.count;case"visitor_touch":return s.visitor?t.visitorTouches.includes(s.visitor):t.visitorTouches.length>0;case"farmer_boosted":return t.farmerBoostTicks>=s.count;case"neighbor_count":return i.length>=s.min;case"neighbor_same":return i.filter(r=>r.seedId===e.seedId).length>=s.min;case"neighbor_diverse":return new Set(i.map(r=>r.evolutionId)).size>=s.min;case"age":return(Date.now()-t.plantedTime)/36e5>=s.hours;case"harvest_spot":return t.spotHarvestCount>=s.count;case"merge_count":return o.totalMerges>=s.count;case"season":{const r=o.currentMonth;return le(r)===s.season}case"month":return o.currentMonth===s.month;case"neighbor_evolution":return i.some(r=>r.evolutionId===s.evolutionId);case"all_neighbors_max":return i.length===8;case"random":return Math.random()<s.chance;default:return!1}}function le(s){return s>=3&&s<=5?"spring":s>=6&&s<=8?"summer":s>=9&&s<=11?"fall":"winter"}function Y(s=new Date().getHours()){return s>=20||s<6}function de(s,e){const t=[];for(let i=-1;i<=1;i++)for(let o=-1;o<=1;o++){if(i===0&&o===0)continue;const n=s.x+i,a=s.y+o;n>=0&&n<e&&a>=0&&a<e&&t.push({x:n,y:a})}return t}function ue(s,e,t,i,o){if(s.specialEvolutions){for(const n of s.specialEvolutions)if(re(n.trigger,e,t,i,o))return n.evolutionId}return s.defaultEvolution}function K(){return{nightWaterCount:0,comboWaterCount:0,visitorTouches:[],farmerBoostTicks:0,plantedTime:Date.now(),spotHarvestCount:0}}const ce=[{id:"sprout_seed",name:"Sprout",emoji:"ðŸŒ±",seedId:"sprout",tier:0,growthTime:0,visualScale:1,pointValue:0,evolvesFrom:null,defaultEvolution:"sprout_seedling",rarity:"common"},{id:"sprout_seedling",name:"Seedling",emoji:"ðŸŒ¿",seedId:"sprout",tier:1,growthTime:3e4,visualScale:1,pointValue:0,evolvesFrom:"sprout_seed",defaultEvolution:"sprout_bud",specialEvolutions:[{evolutionId:"sprout_herb",trigger:{type:"combo_water",count:2},hint:"Try combo watering..."}],rarity:"common"},{id:"sprout_bud",name:"Bud",emoji:"ðŸŒ¼",seedId:"sprout",tier:2,growthTime:45e3,visualScale:1.1,pointValue:0,evolvesFrom:"sprout_seedling",defaultEvolution:"sprout_tulip",specialEvolutions:[{evolutionId:"sprout_sunflower",trigger:{type:"neighbor_count",min:4},hint:"Surround with friends..."}],rarity:"common"},{id:"sprout_herb",name:"Herb",emoji:"ðŸƒ",seedId:"sprout",tier:2,growthTime:4e4,visualScale:1,pointValue:0,evolvesFrom:"sprout_seedling",defaultEvolution:"sprout_mint",specialEvolutions:[{evolutionId:"sprout_tea",trigger:{type:"farmer_boosted",count:10},hint:"The farmer knows best..."}],rarity:"uncommon"},{id:"sprout_tulip",name:"Tulip",emoji:"ðŸŒ·",seedId:"sprout",tier:3,growthTime:6e4,visualScale:1.2,pointValue:0,evolvesFrom:"sprout_bud",defaultEvolution:"sprout_blossom",specialEvolutions:[{evolutionId:"sprout_rose",trigger:{type:"golden"},hint:"Only the golden ones..."}],rarity:"common"},{id:"sprout_sunflower",name:"Sunflower",emoji:"ðŸŒ»",seedId:"sprout",tier:3,growthTime:6e4,visualScale:1.4,pointValue:0,evolvesFrom:"sprout_bud",defaultEvolution:"sprout_sun_spirit",specialEvolutions:[{evolutionId:"sprout_solar_bloom",trigger:{type:"visitor_touch",visitor:"butterfly"},hint:"Butterflies love sunflowers..."}],rarity:"uncommon"},{id:"sprout_mint",name:"Mint",emoji:"ðŸŒ¿",seedId:"sprout",tier:3,growthTime:55e3,visualScale:1.1,pointValue:0,evolvesFrom:"sprout_herb",defaultEvolution:"sprout_frost_mint",specialEvolutions:[{evolutionId:"sprout_frost_mint",trigger:{type:"night_water",count:3},hint:"Cool night waters..."}],rarity:"uncommon"},{id:"sprout_tea",name:"Tea Leaf",emoji:"ðŸ«–",seedId:"sprout",tier:3,growthTime:5e4,visualScale:1.1,pointValue:0,evolvesFrom:"sprout_herb",defaultEvolution:"sprout_golden_tea",rarity:"uncommon"},{id:"sprout_blossom",name:"Blossom",emoji:"ðŸŒ¸",seedId:"sprout",tier:4,growthTime:9e4,visualScale:1.4,pointValue:0,evolvesFrom:"sprout_tulip",defaultEvolution:"sprout_bouquet",specialEvolutions:[{evolutionId:"sprout_sakura",trigger:{type:"season",season:"spring"},hint:"Blooms best in spring..."},{evolutionId:"sprout_lavender",trigger:{type:"night_water",count:3},hint:"Prefers twilight care..."}],rarity:"common"},{id:"sprout_rose",name:"Rose",emoji:"ðŸŒ¹",seedId:"sprout",tier:4,growthTime:9e4,visualScale:1.3,pointValue:0,evolvesFrom:"sprout_tulip",defaultEvolution:"sprout_red_rose",specialEvolutions:[{evolutionId:"sprout_black_rose",trigger:{type:"night_water",count:5},hint:"Embrace the darkness..."}],rarity:"rare"},{id:"sprout_sun_spirit",name:"Sun Spirit",emoji:"ðŸŒž",seedId:"sprout",tier:4,growthTime:1e5,visualScale:1.6,pointValue:0,evolvesFrom:"sprout_sunflower",defaultEvolution:"sprout_solar_king",rarity:"rare"},{id:"sprout_solar_bloom",name:"Solar Bloom",emoji:"ðŸ”†",seedId:"sprout",tier:4,growthTime:1e5,visualScale:1.5,pointValue:0,evolvesFrom:"sprout_sunflower",defaultEvolution:"sprout_radiant",rarity:"rare"},{id:"sprout_frost_mint",name:"Frost Mint",emoji:"â„ï¸",seedId:"sprout",tier:4,growthTime:8e4,visualScale:1.2,pointValue:0,evolvesFrom:"sprout_mint",defaultEvolution:"sprout_ice_crystal",rarity:"rare"},{id:"sprout_golden_tea",name:"Golden Tea",emoji:"ðŸµ",seedId:"sprout",tier:4,growthTime:75e3,visualScale:1.2,pointValue:0,evolvesFrom:"sprout_tea",defaultEvolution:"sprout_zen_garden",specialEvolutions:[{evolutionId:"sprout_zen_garden",trigger:{type:"farmer_boosted",count:20},hint:"Zen requires patience..."}],rarity:"rare"},{id:"sprout_bouquet",name:"Bouquet",emoji:"ðŸ’",seedId:"sprout",tier:5,growthTime:0,visualScale:1.8,pointValue:5,evolvesFrom:"sprout_blossom",defaultEvolution:null,rarity:"common",description:"A beautiful arrangement of flowers."},{id:"sprout_sakura",name:"Sakura",emoji:"ðŸŽ€",seedId:"sprout",tier:5,growthTime:0,visualScale:1.8,pointValue:8,evolvesFrom:"sprout_blossom",defaultEvolution:null,specialEvolutions:[{evolutionId:"sprout_imperial_sakura",trigger:{type:"golden"},hint:"A golden sakura is truly imperial..."}],rarity:"rare",description:"Delicate spring blossoms."},{id:"sprout_lavender",name:"Lavender",emoji:"ðŸ’œ",seedId:"sprout",tier:5,growthTime:0,visualScale:1.6,pointValue:6,evolvesFrom:"sprout_blossom",defaultEvolution:null,specialEvolutions:[{evolutionId:"sprout_mystic_lavender",trigger:{type:"night_water",count:5},hint:"Mystical under moonlight..."}],rarity:"uncommon",description:"Calming purple blooms."},{id:"sprout_red_rose",name:"Red Rose",emoji:"ðŸŒ¹",seedId:"sprout",tier:5,growthTime:0,visualScale:1.7,pointValue:8,evolvesFrom:"sprout_rose",defaultEvolution:null,specialEvolutions:[{evolutionId:"sprout_crystal_rose",trigger:{type:"golden"},hint:"Crystalline beauty..."}],rarity:"rare",description:"The classic symbol of love."},{id:"sprout_black_rose",name:"Black Rose",emoji:"ðŸ–¤",seedId:"sprout",tier:5,growthTime:0,visualScale:1.6,pointValue:5,evolvesFrom:"sprout_rose",defaultEvolution:null,rarity:"epic",description:"Rare and mysterious."},{id:"sprout_solar_king",name:"Solar King",emoji:"ðŸ‘‘",seedId:"sprout",tier:5,growthTime:0,visualScale:2,pointValue:5,evolvesFrom:"sprout_sun_spirit",defaultEvolution:null,rarity:"epic",description:"Ruler of the sunflowers."},{id:"sprout_radiant",name:"Radiant Bloom",emoji:"âœ¨",seedId:"sprout",tier:5,growthTime:0,visualScale:1.8,pointValue:9,evolvesFrom:"sprout_solar_bloom",defaultEvolution:null,rarity:"epic",description:"Glows with inner light."},{id:"sprout_ice_crystal",name:"Ice Crystal Herb",emoji:"ðŸ§Š",seedId:"sprout",tier:5,growthTime:0,visualScale:1.5,pointValue:9,evolvesFrom:"sprout_frost_mint",defaultEvolution:null,rarity:"epic",description:"Frozen botanical perfection."},{id:"sprout_zen_garden",name:"Zen Garden",emoji:"ðŸ§˜",seedId:"sprout",tier:5,growthTime:0,visualScale:1.6,pointValue:6,evolvesFrom:"sprout_golden_tea",defaultEvolution:null,rarity:"epic",description:"Inner peace manifest."},{id:"sprout_imperial_sakura",name:"Imperial Sakura",emoji:"ðŸ¯",seedId:"sprout",tier:6,growthTime:0,visualScale:2.2,pointValue:12,evolvesFrom:"sprout_sakura",defaultEvolution:null,isLegendary:!0,rarity:"legendary",description:"Fit for an emperor."},{id:"sprout_mystic_lavender",name:"Mystic Lavender",emoji:"ðŸ”®",seedId:"sprout",tier:6,growthTime:0,visualScale:2,pointValue:10,evolvesFrom:"sprout_lavender",defaultEvolution:null,isLegendary:!0,rarity:"legendary",description:"Whispers of ancient magic."},{id:"sprout_crystal_rose",name:"Crystal Rose",emoji:"ðŸ’Ž",seedId:"sprout",tier:6,growthTime:0,visualScale:2,pointValue:12,evolvesFrom:"sprout_red_rose",defaultEvolution:null,isLegendary:!0,rarity:"legendary",description:"Pure crystallized beauty."}],he=[{id:"acorn_seed",name:"Acorn",emoji:"ðŸŒ°",seedId:"acorn",tier:0,growthTime:0,visualScale:1,pointValue:0,evolvesFrom:null,defaultEvolution:"acorn_sapling",rarity:"common"},{id:"acorn_sapling",name:"Sapling",emoji:"ðŸª´",seedId:"acorn",tier:1,growthTime:45e3,visualScale:1,pointValue:0,evolvesFrom:"acorn_seed",defaultEvolution:"acorn_young_tree",specialEvolutions:[{evolutionId:"acorn_bamboo",trigger:{type:"combo_water",count:3},hint:"Quick water bursts help bamboo..."}],rarity:"common"},{id:"acorn_young_tree",name:"Young Tree",emoji:"ðŸŒ²",seedId:"acorn",tier:2,growthTime:9e4,visualScale:1.2,pointValue:0,evolvesFrom:"acorn_sapling",defaultEvolution:"acorn_pine",specialEvolutions:[{evolutionId:"acorn_fruit_tree",trigger:{type:"visitor_touch",visitor:"bee"},hint:"Bees help trees bear fruit..."}],rarity:"common"},{id:"acorn_bamboo",name:"Bamboo Shoot",emoji:"ðŸŽ‹",seedId:"acorn",tier:2,growthTime:6e4,visualScale:1.1,pointValue:0,evolvesFrom:"acorn_sapling",defaultEvolution:"acorn_bamboo_grove",specialEvolutions:[{evolutionId:"acorn_panda_bamboo",trigger:{type:"visitor_touch",visitor:"rabbit"},hint:"Cute creatures love bamboo..."}],rarity:"uncommon"},{id:"acorn_pine",name:"Pine",emoji:"ðŸŒ²",seedId:"acorn",tier:3,growthTime:12e4,visualScale:1.4,pointValue:0,evolvesFrom:"acorn_young_tree",defaultEvolution:"acorn_oak",specialEvolutions:[{evolutionId:"acorn_festive",trigger:{type:"month",month:12},hint:"December magic..."},{evolutionId:"acorn_palm",trigger:{type:"neighbor_count",min:2},hint:"Tropical vibes with friends..."}],rarity:"common"},{id:"acorn_fruit_tree",name:"Fruit Tree",emoji:"ðŸŽ",seedId:"acorn",tier:3,growthTime:1e5,visualScale:1.3,pointValue:0,evolvesFrom:"acorn_young_tree",defaultEvolution:"acorn_apple",specialEvolutions:[{evolutionId:"acorn_citrus",trigger:{type:"golden"},hint:"Golden fruit trees..."}],rarity:"uncommon"},{id:"acorn_bamboo_grove",name:"Bamboo Grove",emoji:"ðŸŽ",seedId:"acorn",tier:3,growthTime:8e4,visualScale:1.3,pointValue:0,evolvesFrom:"acorn_bamboo",defaultEvolution:"acorn_imperial_bamboo",rarity:"uncommon"},{id:"acorn_panda_bamboo",name:"Panda Bamboo",emoji:"ðŸ¼",seedId:"acorn",tier:3,growthTime:9e4,visualScale:1.4,pointValue:0,evolvesFrom:"acorn_bamboo",defaultEvolution:"acorn_panda_grove",rarity:"rare"},{id:"acorn_oak",name:"Oak",emoji:"ðŸŒ³",seedId:"acorn",tier:4,growthTime:18e4,visualScale:1.8,pointValue:0,evolvesFrom:"acorn_pine",defaultEvolution:"acorn_grand_oak",specialEvolutions:[{evolutionId:"acorn_wise_oak",trigger:{type:"age",hours:2},hint:"Wisdom comes with age..."},{evolutionId:"acorn_maple",trigger:{type:"season",season:"fall"},hint:"Autumn colors..."}],rarity:"common"},{id:"acorn_festive",name:"Festive Tree",emoji:"ðŸŽ„",seedId:"acorn",tier:4,growthTime:12e4,visualScale:1.6,pointValue:0,evolvesFrom:"acorn_pine",defaultEvolution:"acorn_star_tree",rarity:"rare"},{id:"acorn_palm",name:"Palm",emoji:"ðŸŒ´",seedId:"acorn",tier:4,growthTime:15e4,visualScale:1.7,pointValue:0,evolvesFrom:"acorn_pine",defaultEvolution:"acorn_paradise_palm",specialEvolutions:[{evolutionId:"acorn_coconut",trigger:{type:"harvest_spot",count:3},hint:"Bountiful spots bear more..."}],rarity:"uncommon"},{id:"acorn_apple",name:"Apple Tree",emoji:"ðŸŽ",seedId:"acorn",tier:4,growthTime:15e4,visualScale:1.5,pointValue:0,evolvesFrom:"acorn_fruit_tree",defaultEvolution:"acorn_golden_apple",rarity:"uncommon"},{id:"acorn_citrus",name:"Citrus Grove",emoji:"ðŸŠ",seedId:"acorn",tier:4,growthTime:14e4,visualScale:1.5,pointValue:0,evolvesFrom:"acorn_fruit_tree",defaultEvolution:"acorn_orange_tree",rarity:"rare"},{id:"acorn_imperial_bamboo",name:"Imperial Bamboo",emoji:"ðŸ¯",seedId:"acorn",tier:4,growthTime:1e5,visualScale:1.5,pointValue:0,evolvesFrom:"acorn_bamboo_grove",defaultEvolution:"acorn_zen_bamboo",rarity:"rare"},{id:"acorn_panda_grove",name:"Panda Grove",emoji:"ðŸ¼",seedId:"acorn",tier:4,growthTime:12e4,visualScale:1.6,pointValue:0,evolvesFrom:"acorn_panda_bamboo",defaultEvolution:"acorn_panda_paradise",rarity:"epic"},{id:"acorn_grand_oak",name:"Grand Oak",emoji:"ðŸŒ³",seedId:"acorn",tier:5,growthTime:0,visualScale:2.2,pointValue:8,evolvesFrom:"acorn_oak",defaultEvolution:null,rarity:"common",description:"A mighty oak, standing tall."},{id:"acorn_wise_oak",name:"Wise Oak",emoji:"ðŸ¦‰",seedId:"acorn",tier:5,growthTime:0,visualScale:2,pointValue:12,evolvesFrom:"acorn_oak",defaultEvolution:null,specialEvolutions:[{evolutionId:"acorn_world_tree",trigger:{type:"all_neighbors_max"},hint:"Surrounded by greatness..."}],rarity:"epic",description:"Ancient wisdom in every ring."},{id:"acorn_maple",name:"Autumn Maple",emoji:"ðŸ",seedId:"acorn",tier:5,growthTime:0,visualScale:1.9,pointValue:9,evolvesFrom:"acorn_oak",defaultEvolution:null,specialEvolutions:[{evolutionId:"acorn_syrup_maple",trigger:{type:"visitor_touch",visitor:"bee"},hint:"Sweet visitors..."}],rarity:"rare",description:"Brilliant fall colors."},{id:"acorn_star_tree",name:"Star Tree",emoji:"â­",seedId:"acorn",tier:5,growthTime:0,visualScale:2,pointValue:15,evolvesFrom:"acorn_festive",defaultEvolution:null,rarity:"epic",description:"Topped with starlight."},{id:"acorn_paradise_palm",name:"Paradise Palm",emoji:"ðŸï¸",seedId:"acorn",tier:5,growthTime:0,visualScale:2,pointValue:10,evolvesFrom:"acorn_palm",defaultEvolution:null,rarity:"rare",description:"Island dreams."},{id:"acorn_coconut",name:"Coconut King",emoji:"ðŸ¥¥",seedId:"acorn",tier:5,growthTime:0,visualScale:1.8,pointValue:11,evolvesFrom:"acorn_palm",defaultEvolution:null,rarity:"epic",description:"Abundant tropical bounty."},{id:"acorn_golden_apple",name:"Golden Apple",emoji:"ðŸ",seedId:"acorn",tier:5,growthTime:0,visualScale:1.7,pointValue:10,evolvesFrom:"acorn_apple",defaultEvolution:null,specialEvolutions:[{evolutionId:"acorn_orchard_queen",trigger:{type:"neighbor_same",min:3},hint:"An orchard needs company..."}],rarity:"rare",description:"Prized golden fruit."},{id:"acorn_orange_tree",name:"Orange Tree",emoji:"ðŸŠ",seedId:"acorn",tier:5,growthTime:0,visualScale:1.7,pointValue:9,evolvesFrom:"acorn_citrus",defaultEvolution:null,rarity:"rare",description:"Sweet citrus abundance."},{id:"acorn_zen_bamboo",name:"Zen Bamboo",emoji:"ðŸŽ‹",seedId:"acorn",tier:5,growthTime:0,visualScale:1.8,pointValue:11,evolvesFrom:"acorn_imperial_bamboo",defaultEvolution:null,rarity:"epic",description:"Perfect tranquility."},{id:"acorn_panda_paradise",name:"Panda Paradise",emoji:"ðŸ¼",seedId:"acorn",tier:5,growthTime:0,visualScale:2,pointValue:15,evolvesFrom:"acorn_panda_grove",defaultEvolution:null,rarity:"epic",description:"A panda's dream home."},{id:"acorn_world_tree",name:"World Tree",emoji:"ðŸŒ",seedId:"acorn",tier:6,growthTime:0,visualScale:2.5,pointValue:50,evolvesFrom:"acorn_wise_oak",defaultEvolution:null,isLegendary:!0,rarity:"legendary",description:"Yggdrasil, the tree of life."},{id:"acorn_syrup_maple",name:"Syrup Maple",emoji:"ðŸ¯",seedId:"acorn",tier:6,growthTime:0,visualScale:2,pointValue:20,evolvesFrom:"acorn_maple",defaultEvolution:null,isLegendary:!0,rarity:"legendary",description:"The sweetest tree in existence."},{id:"acorn_orchard_queen",name:"Orchard Queen",emoji:"ðŸ§º",seedId:"acorn",tier:6,growthTime:0,visualScale:2.2,pointValue:25,evolvesFrom:"acorn_golden_apple",defaultEvolution:null,isLegendary:!0,rarity:"legendary",description:"Ruler of all fruit trees."}],me=[{id:"bean_seed",name:"Bean",emoji:"ðŸ«˜",seedId:"bean",tier:0,growthTime:0,visualScale:1,pointValue:0,evolvesFrom:null,defaultEvolution:"bean_sprout",rarity:"common"},{id:"bean_sprout",name:"Bean Sprout",emoji:"ðŸŒ±",seedId:"bean",tier:1,growthTime:25e3,visualScale:1,pointValue:0,evolvesFrom:"bean_seed",defaultEvolution:"bean_vine",specialEvolutions:[{evolutionId:"bean_pea",trigger:{type:"farmer_boosted",count:5},hint:"Farmer's favorites..."}],rarity:"common"},{id:"bean_vine",name:"Vine",emoji:"ðŸ‡",seedId:"bean",tier:2,growthTime:4e4,visualScale:1.1,pointValue:0,evolvesFrom:"bean_sprout",defaultEvolution:"bean_grape",specialEvolutions:[{evolutionId:"bean_gourd",trigger:{type:"neighbor_count",min:2},hint:"Vines like to spread..."}],rarity:"common"},{id:"bean_pea",name:"Pea Pod",emoji:"ðŸ«›",seedId:"bean",tier:2,growthTime:35e3,visualScale:1,pointValue:0,evolvesFrom:"bean_sprout",defaultEvolution:"bean_sweet_pea",specialEvolutions:[{evolutionId:"bean_magic",trigger:{type:"combo_water",count:3},hint:"Magic requires speed..."}],rarity:"uncommon"},{id:"bean_grape",name:"Grape Vine",emoji:"ðŸ‡",seedId:"bean",tier:3,growthTime:5e4,visualScale:1.2,pointValue:0,evolvesFrom:"bean_vine",defaultEvolution:"bean_wine_grape",specialEvolutions:[{evolutionId:"bean_kiwi",trigger:{type:"night_water",count:2},hint:"Exotic fruits prefer shade..."}],rarity:"common"},{id:"bean_gourd",name:"Gourd",emoji:"ðŸ¥’",seedId:"bean",tier:3,growthTime:45e3,visualScale:1.2,pointValue:0,evolvesFrom:"bean_vine",defaultEvolution:"bean_melon",specialEvolutions:[{evolutionId:"bean_pumpkin",trigger:{type:"month",month:10},hint:"October magic..."},{evolutionId:"bean_pepper",trigger:{type:"combo_water",count:3},hint:"Fast watering brings the heat..."}],rarity:"uncommon"},{id:"bean_sweet_pea",name:"Sweet Pea",emoji:"ðŸ«›",seedId:"bean",tier:3,growthTime:45e3,visualScale:1.1,pointValue:0,evolvesFrom:"bean_pea",defaultEvolution:"bean_garden_pea",rarity:"uncommon"},{id:"bean_magic",name:"Magic Bean",emoji:"ðŸª„",seedId:"bean",tier:3,growthTime:55e3,visualScale:1.3,pointValue:0,evolvesFrom:"bean_pea",defaultEvolution:"bean_cloud",rarity:"rare"},{id:"bean_wine_grape",name:"Wine Grape",emoji:"ðŸ·",seedId:"bean",tier:4,growthTime:7e4,visualScale:1.3,pointValue:0,evolvesFrom:"bean_grape",defaultEvolution:"bean_vineyard",specialEvolutions:[{evolutionId:"bean_royal_vineyard",trigger:{type:"age",hours:1},hint:"Good wine takes time..."}],rarity:"uncommon"},{id:"bean_kiwi",name:"Kiwi",emoji:"ðŸ¥",seedId:"bean",tier:4,growthTime:6e4,visualScale:1.2,pointValue:0,evolvesFrom:"bean_grape",defaultEvolution:"bean_star_fruit",rarity:"rare"},{id:"bean_melon",name:"Melon",emoji:"ðŸˆ",seedId:"bean",tier:4,growthTime:65e3,visualScale:1.4,pointValue:0,evolvesFrom:"bean_gourd",defaultEvolution:"bean_watermelon",specialEvolutions:[{evolutionId:"bean_moon_melon",trigger:{type:"night_water",count:5},hint:"Moonlit melons..."}],rarity:"uncommon"},{id:"bean_pumpkin",name:"Pumpkin",emoji:"ðŸŽƒ",seedId:"bean",tier:4,growthTime:8e4,visualScale:1.5,pointValue:0,evolvesFrom:"bean_gourd",defaultEvolution:"bean_giant_pumpkin",specialEvolutions:[{evolutionId:"bean_ghost_pumpkin",trigger:{type:"night_water",count:3},hint:"Spooky night waters..."}],rarity:"rare"},{id:"bean_pepper",name:"Pepper",emoji:"ðŸŒ¶ï¸",seedId:"bean",tier:4,growthTime:6e4,visualScale:1.2,pointValue:0,evolvesFrom:"bean_gourd",defaultEvolution:"bean_chili",specialEvolutions:[{evolutionId:"bean_rainbow_pepper",trigger:{type:"neighbor_diverse",min:4},hint:"Diversity brings color..."}],rarity:"uncommon"},{id:"bean_garden_pea",name:"Garden Pea",emoji:"ðŸ’š",seedId:"bean",tier:4,growthTime:55e3,visualScale:1.2,pointValue:0,evolvesFrom:"bean_sweet_pea",defaultEvolution:"bean_pea_pod",rarity:"uncommon"},{id:"bean_cloud",name:"Cloud Bean",emoji:"â˜ï¸",seedId:"bean",tier:4,growthTime:75e3,visualScale:1.4,pointValue:0,evolvesFrom:"bean_magic",defaultEvolution:"bean_sky_bean",specialEvolutions:[{evolutionId:"bean_golden_goose",trigger:{type:"golden"},hint:"Golden clouds..."}],rarity:"epic"},{id:"bean_vineyard",name:"Vineyard",emoji:"ðŸ‡",seedId:"bean",tier:5,growthTime:0,visualScale:1.7,pointValue:8,evolvesFrom:"bean_wine_grape",defaultEvolution:null,rarity:"uncommon",description:"A bountiful grape harvest."},{id:"bean_royal_vineyard",name:"Royal Vineyard",emoji:"ðŸ°",seedId:"bean",tier:5,growthTime:0,visualScale:1.9,pointValue:12,evolvesFrom:"bean_wine_grape",defaultEvolution:null,rarity:"epic",description:"Fit for royalty."},{id:"bean_star_fruit",name:"Star Fruit",emoji:"â­",seedId:"bean",tier:5,growthTime:0,visualScale:1.5,pointValue:10,evolvesFrom:"bean_kiwi",defaultEvolution:null,rarity:"rare",description:"Exotic and stellar."},{id:"bean_watermelon",name:"Watermelon",emoji:"ðŸ‰",seedId:"bean",tier:5,growthTime:0,visualScale:1.8,pointValue:8,evolvesFrom:"bean_melon",defaultEvolution:null,rarity:"common",description:"Summer sweetness."},{id:"bean_moon_melon",name:"Moon Melon",emoji:"ðŸŒ™",seedId:"bean",tier:5,growthTime:0,visualScale:1.7,pointValue:12,evolvesFrom:"bean_melon",defaultEvolution:null,specialEvolutions:[{evolutionId:"bean_crystal_melon",trigger:{type:"golden"},hint:"Golden moonlight..."}],rarity:"epic",description:"Glows under moonlight."},{id:"bean_giant_pumpkin",name:"Giant Pumpkin",emoji:"ðŸ†",seedId:"bean",tier:5,growthTime:0,visualScale:2,pointValue:10,evolvesFrom:"bean_pumpkin",defaultEvolution:null,rarity:"rare",description:"Prize-winning size."},{id:"bean_ghost_pumpkin",name:"Ghost Pumpkin",emoji:"ðŸŽƒ",seedId:"bean",tier:5,growthTime:0,visualScale:1.8,pointValue:15,evolvesFrom:"bean_pumpkin",defaultEvolution:null,rarity:"epic",description:"Spooky but friendly."},{id:"bean_chili",name:"Fire Chili",emoji:"ðŸ”¥",seedId:"bean",tier:5,growthTime:0,visualScale:1.5,pointValue:9,evolvesFrom:"bean_pepper",defaultEvolution:null,specialEvolutions:[{evolutionId:"bean_dragon",trigger:{type:"neighbor_evolution",evolutionId:"bean_chili"},hint:"Fire breeds fire..."}],rarity:"rare",description:"Intensely hot!"},{id:"bean_rainbow_pepper",name:"Rainbow Pepper",emoji:"ðŸŒˆ",seedId:"bean",tier:5,growthTime:0,visualScale:1.6,pointValue:11,evolvesFrom:"bean_pepper",defaultEvolution:null,rarity:"epic",description:"Every color imaginable."},{id:"bean_pea_pod",name:"Perfect Pea Pod",emoji:"ðŸ«›",seedId:"bean",tier:5,growthTime:0,visualScale:1.4,pointValue:6,evolvesFrom:"bean_garden_pea",defaultEvolution:null,rarity:"common",description:"Perfectly plump peas."},{id:"bean_sky_bean",name:"Sky Bean",emoji:"ðŸŒ¤ï¸",seedId:"bean",tier:5,growthTime:0,visualScale:1.8,pointValue:15,evolvesFrom:"bean_cloud",defaultEvolution:null,rarity:"epic",description:"Reaches for the heavens."},{id:"bean_golden_goose",name:"Golden Goose Bean",emoji:"ðŸ¥š",seedId:"bean",tier:5,growthTime:0,visualScale:2,pointValue:20,evolvesFrom:"bean_cloud",defaultEvolution:null,rarity:"epic",description:"Lays golden eggs... metaphorically."},{id:"bean_crystal_melon",name:"Crystal Melon",emoji:"ï¿½",seedId:"bean",tier:6,growthTime:0,visualScale:2,pointValue:25,evolvesFrom:"bean_moon_melon",defaultEvolution:null,isLegendary:!0,rarity:"legendary",description:"Pure crystallized sweetness."},{id:"bean_dragon",name:"Dragon Pepper",emoji:"ðŸ‰",seedId:"bean",tier:6,growthTime:0,visualScale:2.2,pointValue:30,evolvesFrom:"bean_chili",defaultEvolution:null,isLegendary:!0,rarity:"legendary",description:"Breathes actual fire."}],pe=[{id:"bulb_seed",name:"Bulb",emoji:"ðŸ§…",seedId:"bulb",tier:0,growthTime:0,visualScale:1,pointValue:0,evolvesFrom:null,defaultEvolution:"bulb_sprout",rarity:"common"},{id:"bulb_sprout",name:"Bulb Sprout",emoji:"ðŸŒ±",seedId:"bulb",tier:1,growthTime:35e3,visualScale:1,pointValue:0,evolvesFrom:"bulb_seed",defaultEvolution:"bulb_onion",specialEvolutions:[{evolutionId:"bulb_root",trigger:{type:"night_water",count:1},hint:"Roots grow in darkness..."}],rarity:"common"},{id:"bulb_onion",name:"Onion",emoji:"ðŸ§…",seedId:"bulb",tier:2,growthTime:5e4,visualScale:1.1,pointValue:0,evolvesFrom:"bulb_sprout",defaultEvolution:"bulb_golden_onion",specialEvolutions:[{evolutionId:"bulb_garlic",trigger:{type:"night_water",count:2},hint:"Garlic loves the dark..."}],rarity:"common"},{id:"bulb_root",name:"Root",emoji:"ðŸ¥•",seedId:"bulb",tier:2,growthTime:45e3,visualScale:1,pointValue:0,evolvesFrom:"bulb_sprout",defaultEvolution:"bulb_carrot",specialEvolutions:[{evolutionId:"bulb_potato",trigger:{type:"neighbor_same",min:2},hint:"Potatoes grow in groups..."}],rarity:"uncommon"},{id:"bulb_bloom",name:"Bulb Bloom",emoji:"ðŸŒº",seedId:"bulb",tier:2,growthTime:55e3,visualScale:1.2,pointValue:0,evolvesFrom:"bulb_sprout",defaultEvolution:"bulb_daffodil",specialEvolutions:[{evolutionId:"bulb_lotus",trigger:{type:"combo_water",count:3},hint:"Water lilies need lots of water..."}],rarity:"uncommon"},{id:"bulb_golden_onion",name:"Golden Onion",emoji:"ðŸ§…",seedId:"bulb",tier:3,growthTime:6e4,visualScale:1.2,pointValue:0,evolvesFrom:"bulb_onion",defaultEvolution:"bulb_onion_king",specialEvolutions:[{evolutionId:"bulb_onion_king",trigger:{type:"neighbor_same",min:3},hint:"Surround with onion allies..."}],rarity:"uncommon"},{id:"bulb_garlic",name:"Garlic",emoji:"ðŸ§„",seedId:"bulb",tier:3,growthTime:55e3,visualScale:1.1,pointValue:0,evolvesFrom:"bulb_onion",defaultEvolution:"bulb_garlic_braid",specialEvolutions:[{evolutionId:"bulb_vampire_garlic",trigger:{type:"night_water",count:5},hint:"Only the darkest nights..."}],rarity:"uncommon"},{id:"bulb_carrot",name:"Carrot",emoji:"ðŸ¥•",seedId:"bulb",tier:3,growthTime:5e4,visualScale:1.1,pointValue:0,evolvesFrom:"bulb_root",defaultEvolution:"bulb_golden_carrot",specialEvolutions:[{evolutionId:"bulb_bunny_carrot",trigger:{type:"visitor_touch",visitor:"rabbit"},hint:"Bunnies love carrots..."}],rarity:"common"},{id:"bulb_potato",name:"Potato",emoji:"ðŸ¥”",seedId:"bulb",tier:3,growthTime:55e3,visualScale:1.2,pointValue:0,evolvesFrom:"bulb_root",defaultEvolution:"bulb_golden_potato",specialEvolutions:[{evolutionId:"bulb_potato_castle",trigger:{type:"neighbor_same",min:4},hint:"Build a potato empire..."}],rarity:"uncommon"},{id:"bulb_daffodil",name:"Daffodil",emoji:"ðŸ’",seedId:"bulb",tier:3,growthTime:6e4,visualScale:1.3,pointValue:0,evolvesFrom:"bulb_bloom",defaultEvolution:"bulb_star_daffodil",specialEvolutions:[{evolutionId:"bulb_hibiscus",trigger:{type:"visitor_touch"},hint:"Visitors bring color..."}],rarity:"uncommon"},{id:"bulb_lotus",name:"Lotus",emoji:"ðŸª·",seedId:"bulb",tier:3,growthTime:7e4,visualScale:1.3,pointValue:0,evolvesFrom:"bulb_bloom",defaultEvolution:"bulb_sacred_lotus",specialEvolutions:[{evolutionId:"bulb_koi_pond",trigger:{type:"neighbor_evolution",evolutionId:"bulb_lotus"},hint:"Lotuses attract koi..."}],rarity:"rare"},{id:"bulb_onion_king",name:"Onion King",emoji:"ðŸ¤´",seedId:"bulb",tier:4,growthTime:8e4,visualScale:1.5,pointValue:0,evolvesFrom:"bulb_golden_onion",defaultEvolution:"bulb_onion_emperor",rarity:"rare"},{id:"bulb_garlic_braid",name:"Garlic Braid",emoji:"ðŸ§„",seedId:"bulb",tier:4,growthTime:7e4,visualScale:1.3,pointValue:0,evolvesFrom:"bulb_garlic",defaultEvolution:"bulb_garlic_fortress",rarity:"uncommon"},{id:"bulb_vampire_garlic",name:"Vampire Garlic",emoji:"ðŸ§›",seedId:"bulb",tier:4,growthTime:9e4,visualScale:1.4,pointValue:0,evolvesFrom:"bulb_garlic",defaultEvolution:"bulb_death_bulb",rarity:"epic"},{id:"bulb_golden_carrot",name:"Golden Carrot",emoji:"ðŸ¥•",seedId:"bulb",tier:4,growthTime:65e3,visualScale:1.3,pointValue:0,evolvesFrom:"bulb_carrot",defaultEvolution:"bulb_prize_carrot",rarity:"rare"},{id:"bulb_bunny_carrot",name:"Bunny Carrot",emoji:"ðŸ°",seedId:"bulb",tier:4,growthTime:7e4,visualScale:1.4,pointValue:0,evolvesFrom:"bulb_carrot",defaultEvolution:"bulb_carrot_kingdom",rarity:"epic"},{id:"bulb_golden_potato",name:"Golden Potato",emoji:"ðŸ¥‡",seedId:"bulb",tier:4,growthTime:75e3,visualScale:1.4,pointValue:0,evolvesFrom:"bulb_potato",defaultEvolution:"bulb_potato_crown",rarity:"rare"},{id:"bulb_potato_castle",name:"Potato Castle",emoji:"ðŸ°",seedId:"bulb",tier:4,growthTime:1e5,visualScale:1.8,pointValue:0,evolvesFrom:"bulb_potato",defaultEvolution:"bulb_root_empire",rarity:"epic"},{id:"bulb_star_daffodil",name:"Star Daffodil",emoji:"â­",seedId:"bulb",tier:4,growthTime:8e4,visualScale:1.5,pointValue:0,evolvesFrom:"bulb_daffodil",defaultEvolution:"bulb_celestial_bloom",rarity:"rare"},{id:"bulb_hibiscus",name:"Hibiscus",emoji:"ðŸŒº",seedId:"bulb",tier:4,growthTime:75e3,visualScale:1.4,pointValue:0,evolvesFrom:"bulb_daffodil",defaultEvolution:"bulb_tropical_bloom",specialEvolutions:[{evolutionId:"bulb_flamingo",trigger:{type:"neighbor_count",min:3},hint:"Pink attracts pink..."}],rarity:"uncommon"},{id:"bulb_sacred_lotus",name:"Sacred Lotus",emoji:"ðŸ•‰ï¸",seedId:"bulb",tier:4,growthTime:1e5,visualScale:1.6,pointValue:0,evolvesFrom:"bulb_lotus",defaultEvolution:"bulb_enlightened_lotus",rarity:"epic"},{id:"bulb_koi_pond",name:"Koi Pond",emoji:"ðŸŸ",seedId:"bulb",tier:4,growthTime:9e4,visualScale:1.7,pointValue:0,evolvesFrom:"bulb_lotus",defaultEvolution:"bulb_dragon_koi",rarity:"epic"},{id:"bulb_onion_emperor",name:"Onion Emperor",emoji:"ðŸ†",seedId:"bulb",tier:5,growthTime:0,visualScale:1.8,pointValue:12,evolvesFrom:"bulb_onion_king",defaultEvolution:null,rarity:"epic",description:"Supreme ruler of alliums."},{id:"bulb_garlic_fortress",name:"Garlic Fortress",emoji:"ðŸ¯",seedId:"bulb",tier:5,growthTime:0,visualScale:1.7,pointValue:10,evolvesFrom:"bulb_garlic_braid",defaultEvolution:null,rarity:"rare",description:"Impenetrable garlic defense."},{id:"bulb_death_bulb",name:"Death Bulb",emoji:"ðŸ’€",seedId:"bulb",tier:5,growthTime:0,visualScale:1.6,pointValue:18,evolvesFrom:"bulb_vampire_garlic",defaultEvolution:null,rarity:"epic",description:"Not actually deadly, just dramatic."},{id:"bulb_prize_carrot",name:"Prize Carrot",emoji:"ðŸ†",seedId:"bulb",tier:5,growthTime:0,visualScale:1.5,pointValue:9,evolvesFrom:"bulb_golden_carrot",defaultEvolution:null,rarity:"rare",description:"Blue ribbon worthy."},{id:"bulb_carrot_kingdom",name:"Carrot Kingdom",emoji:"ðŸ°",seedId:"bulb",tier:5,growthTime:0,visualScale:1.9,pointValue:15,evolvesFrom:"bulb_bunny_carrot",defaultEvolution:null,rarity:"epic",description:"Where bunnies reign supreme."},{id:"bulb_potato_crown",name:"Potato Crown",emoji:"ðŸ«…",seedId:"bulb",tier:5,growthTime:0,visualScale:1.6,pointValue:11,evolvesFrom:"bulb_golden_potato",defaultEvolution:null,rarity:"rare",description:"The humblest of royalty."},{id:"bulb_root_empire",name:"Root Empire",emoji:"ðŸ°",seedId:"bulb",tier:5,growthTime:0,visualScale:2.2,pointValue:22,evolvesFrom:"bulb_potato_castle",defaultEvolution:null,rarity:"epic",description:"An underground civilization."},{id:"bulb_celestial_bloom",name:"Celestial Bloom",emoji:"ðŸŒŸ",seedId:"bulb",tier:5,growthTime:0,visualScale:1.8,pointValue:14,evolvesFrom:"bulb_star_daffodil",defaultEvolution:null,rarity:"epic",description:"Touched by starlight."},{id:"bulb_tropical_bloom",name:"Tropical Bloom",emoji:"ðŸŒº",seedId:"bulb",tier:5,growthTime:0,visualScale:1.6,pointValue:9,evolvesFrom:"bulb_hibiscus",defaultEvolution:null,rarity:"uncommon",description:"Island paradise."},{id:"bulb_flamingo",name:"Flamingo Flower",emoji:"ðŸ¦©",seedId:"bulb",tier:5,growthTime:0,visualScale:1.7,pointValue:12,evolvesFrom:"bulb_hibiscus",defaultEvolution:null,rarity:"epic",description:"Impossibly elegant."},{id:"bulb_enlightened_lotus",name:"Enlightened Lotus",emoji:"ðŸ•‰ï¸",seedId:"bulb",tier:5,growthTime:0,visualScale:2,pointValue:20,evolvesFrom:"bulb_sacred_lotus",defaultEvolution:null,rarity:"epic",description:"Pure spiritual energy."},{id:"bulb_dragon_koi",name:"Dragon Koi",emoji:"ðŸ‰",seedId:"bulb",tier:5,growthTime:0,visualScale:2,pointValue:22,evolvesFrom:"bulb_koi_pond",defaultEvolution:null,rarity:"epic",description:"The koi that became a dragon."}],ge=[{id:"spore_seed",name:"Spore",emoji:"ðŸ„",seedId:"spore",tier:0,growthTime:0,visualScale:1,pointValue:0,evolvesFrom:null,defaultEvolution:"spore_fungus",rarity:"common"},{id:"spore_fungus",name:"Fungus",emoji:"ðŸ¦ ",seedId:"spore",tier:1,growthTime:4e4,visualScale:1,pointValue:0,evolvesFrom:"spore_seed",defaultEvolution:"spore_mushroom",specialEvolutions:[{evolutionId:"spore_dark",trigger:{type:"night_water",count:2},hint:"Darkness awakens..."}],rarity:"common"},{id:"spore_mushroom",name:"Mushroom",emoji:"ðŸ„",seedId:"spore",tier:2,growthTime:55e3,visualScale:1.1,pointValue:0,evolvesFrom:"spore_fungus",defaultEvolution:"spore_portobello",specialEvolutions:[{evolutionId:"spore_toadstool",trigger:{type:"random",chance:.3},hint:"Sometimes mushrooms are... different."}],rarity:"common"},{id:"spore_dark",name:"Shadow Spore",emoji:"ðŸŒ‘",seedId:"spore",tier:2,growthTime:6e4,visualScale:1.1,pointValue:0,evolvesFrom:"spore_fungus",defaultEvolution:"spore_night_bloom",specialEvolutions:[{evolutionId:"spore_eerie",trigger:{type:"month",month:10},hint:"October nights..."}],rarity:"uncommon"},{id:"spore_portobello",name:"Portobello",emoji:"ðŸŸ¤",seedId:"spore",tier:3,growthTime:65e3,visualScale:1.2,pointValue:0,evolvesFrom:"spore_mushroom",defaultEvolution:"spore_gourmet",specialEvolutions:[{evolutionId:"spore_pizza",trigger:{type:"combo_water",count:3},hint:"Hot and fast..."}],rarity:"common"},{id:"spore_toadstool",name:"Toadstool",emoji:"ðŸ”´",seedId:"spore",tier:3,growthTime:7e4,visualScale:1.2,pointValue:0,evolvesFrom:"spore_mushroom",defaultEvolution:"spore_death_cap",specialEvolutions:[{evolutionId:"spore_fairy_ring",trigger:{type:"neighbor_same",min:3},hint:"Mushrooms gather in circles..."}],rarity:"uncommon"},{id:"spore_night_bloom",name:"Night Bloom",emoji:"ðŸŒ™",seedId:"spore",tier:3,growthTime:65e3,visualScale:1.2,pointValue:0,evolvesFrom:"spore_dark",defaultEvolution:"spore_bat_flower",specialEvolutions:[{evolutionId:"spore_eye_flower",trigger:{type:"neighbor_diverse",min:4},hint:"Sees all around it..."}],rarity:"uncommon"},{id:"spore_eerie",name:"Eerie Bloom",emoji:"ðŸ‘»",seedId:"spore",tier:3,growthTime:75e3,visualScale:1.3,pointValue:0,evolvesFrom:"spore_dark",defaultEvolution:"spore_skull",specialEvolutions:[{evolutionId:"spore_web",trigger:{type:"neighbor_count",min:6},hint:"Webs need corners..."}],rarity:"rare"},{id:"spore_gourmet",name:"Gourmet Mushroom",emoji:"ðŸŸ¡",seedId:"spore",tier:4,growthTime:8e4,visualScale:1.3,pointValue:0,evolvesFrom:"spore_portobello",defaultEvolution:"spore_chanterelle",specialEvolutions:[{evolutionId:"spore_truffle",trigger:{type:"golden"},hint:"Rarest of the rare..."}],rarity:"uncommon"},{id:"spore_pizza",name:"Pizza Mushroom",emoji:"ðŸ•",seedId:"spore",tier:4,growthTime:7e4,visualScale:1.4,pointValue:0,evolvesFrom:"spore_portobello",defaultEvolution:"spore_supreme",rarity:"rare"},{id:"spore_death_cap",name:"Death Cap",emoji:"â˜ ï¸",seedId:"spore",tier:4,growthTime:9e4,visualScale:1.3,pointValue:0,evolvesFrom:"spore_toadstool",defaultEvolution:"spore_toxic",specialEvolutions:[{evolutionId:"spore_wizard",trigger:{type:"farmer_boosted",count:15},hint:"The farmer knows alchemy..."}],rarity:"rare"},{id:"spore_fairy_ring",name:"Fairy Ring",emoji:"ðŸ§š",seedId:"spore",tier:4,growthTime:95e3,visualScale:1.6,pointValue:0,evolvesFrom:"spore_toadstool",defaultEvolution:"spore_fairy_kingdom",rarity:"epic"},{id:"spore_bat_flower",name:"Bat Flower",emoji:"ðŸ¦‡",seedId:"spore",tier:4,growthTime:85e3,visualScale:1.4,pointValue:0,evolvesFrom:"spore_night_bloom",defaultEvolution:"spore_vampire_bloom",rarity:"rare"},{id:"spore_eye_flower",name:"Eye Flower",emoji:"ðŸ‘ï¸",seedId:"spore",tier:4,growthTime:9e4,visualScale:1.4,pointValue:0,evolvesFrom:"spore_night_bloom",defaultEvolution:"spore_all_seeing",rarity:"epic"},{id:"spore_skull",name:"Skull Bloom",emoji:"ðŸ’€",seedId:"spore",tier:4,growthTime:1e5,visualScale:1.5,pointValue:0,evolvesFrom:"spore_eerie",defaultEvolution:"spore_ghost_orchid",rarity:"epic"},{id:"spore_web",name:"Web Flower",emoji:"ðŸ•¸ï¸",seedId:"spore",tier:4,growthTime:95e3,visualScale:1.5,pointValue:0,evolvesFrom:"spore_eerie",defaultEvolution:"spore_spider_lily",rarity:"epic"},{id:"spore_chanterelle",name:"Chanterelle",emoji:"ðŸŸ¡",seedId:"spore",tier:5,growthTime:0,visualScale:1.5,pointValue:9,evolvesFrom:"spore_gourmet",defaultEvolution:null,rarity:"uncommon",description:"Prized by chefs worldwide."},{id:"spore_truffle",name:"Diamond Truffle",emoji:"ðŸ’Ž",seedId:"spore",tier:5,growthTime:0,visualScale:1.6,pointValue:25,evolvesFrom:"spore_gourmet",defaultEvolution:null,rarity:"legendary",description:"Worth its weight in gold."},{id:"spore_supreme",name:"Supreme Shroom",emoji:"ðŸ•",seedId:"spore",tier:5,growthTime:0,visualScale:1.6,pointValue:11,evolvesFrom:"spore_pizza",defaultEvolution:null,rarity:"rare",description:"All the toppings."},{id:"spore_toxic",name:"Toxic Terror",emoji:"â˜¢ï¸",seedId:"spore",tier:5,growthTime:0,visualScale:1.5,pointValue:12,evolvesFrom:"spore_death_cap",defaultEvolution:null,rarity:"epic",description:"Handle with care (not really toxic)."},{id:"spore_wizard",name:"Wizard Cap",emoji:"ðŸ§™",seedId:"spore",tier:5,growthTime:0,visualScale:1.7,pointValue:18,evolvesFrom:"spore_death_cap",defaultEvolution:null,rarity:"epic",description:"Grants +10 INT (not really)."},{id:"spore_fairy_kingdom",name:"Fairy Kingdom",emoji:"ðŸ§š",seedId:"spore",tier:5,growthTime:0,visualScale:2,pointValue:20,evolvesFrom:"spore_fairy_ring",defaultEvolution:null,rarity:"epic",description:"A tiny civilization."},{id:"spore_vampire_bloom",name:"Vampire Bloom",emoji:"ðŸ§›",seedId:"spore",tier:5,growthTime:0,visualScale:1.7,pointValue:14,evolvesFrom:"spore_bat_flower",defaultEvolution:null,rarity:"epic",description:"Blooms only at night."},{id:"spore_all_seeing",name:"All-Seeing Flower",emoji:"ðŸ”®",seedId:"spore",tier:5,growthTime:0,visualScale:1.8,pointValue:18,evolvesFrom:"spore_eye_flower",defaultEvolution:null,rarity:"epic",description:"Knows your deepest secrets."},{id:"spore_ghost_orchid",name:"Ghost Orchid",emoji:"ðŸ‘»",seedId:"spore",tier:5,growthTime:0,visualScale:1.7,pointValue:19,evolvesFrom:"spore_skull",defaultEvolution:null,rarity:"epic",description:"Hauntingly beautiful."},{id:"spore_spider_lily",name:"Spider Lily",emoji:"ðŸ•·ï¸",seedId:"spore",tier:5,growthTime:0,visualScale:1.8,pointValue:16,evolvesFrom:"spore_web",defaultEvolution:null,specialEvolutions:[{evolutionId:"spore_black_widow",trigger:{type:"golden"},hint:"Golden darkness..."}],rarity:"epic",description:"Eight-legged elegance."},{id:"spore_black_widow",name:"Black Widow",emoji:"ðŸ–¤",seedId:"spore",tier:6,growthTime:0,visualScale:2,pointValue:30,evolvesFrom:"spore_spider_lily",defaultEvolution:null,isLegendary:!0,rarity:"legendary",description:"Beautiful and deadly (looking)."}],ve=[{id:"cactus_seed",name:"Cactus Pip",emoji:"ðŸŒµ",seedId:"cactus",tier:0,growthTime:0,visualScale:1,pointValue:0,evolvesFrom:null,defaultEvolution:"cactus_sprout",rarity:"common"},{id:"cactus_sprout",name:"Cactus Sprout",emoji:"ðŸŒ±",seedId:"cactus",tier:1,growthTime:5e4,visualScale:1,pointValue:0,evolvesFrom:"cactus_seed",defaultEvolution:"cactus_small",specialEvolutions:[{evolutionId:"cactus_succulent",trigger:{type:"farmer_boosted",count:5},hint:"Tender loving care..."}],rarity:"common"},{id:"cactus_small",name:"Small Cactus",emoji:"ðŸŒµ",seedId:"cactus",tier:2,growthTime:7e4,visualScale:1.1,pointValue:0,evolvesFrom:"cactus_sprout",defaultEvolution:"cactus_barrel",specialEvolutions:[{evolutionId:"cactus_tall",trigger:{type:"age",hours:1},hint:"Patience makes them tall..."}],rarity:"common"},{id:"cactus_succulent",name:"Succulent",emoji:"ðŸŒ¿",seedId:"cactus",tier:2,growthTime:6e4,visualScale:1,pointValue:0,evolvesFrom:"cactus_sprout",defaultEvolution:"cactus_jade",specialEvolutions:[{evolutionId:"cactus_rosette",trigger:{type:"visitor_touch",visitor:"butterfly"},hint:"Beauty attracts beauty..."}],rarity:"uncommon"},{id:"cactus_barrel",name:"Barrel Cactus",emoji:"ï¿½",seedId:"cactus",tier:3,growthTime:9e4,visualScale:1.3,pointValue:0,evolvesFrom:"cactus_small",defaultEvolution:"cactus_water_store",specialEvolutions:[{evolutionId:"cactus_ancient_barrel",trigger:{type:"age",hours:3},hint:"Ancient wisdom..."}],rarity:"common"},{id:"cactus_tall",name:"Tall Cactus",emoji:"ðŸŒµ",seedId:"cactus",tier:3,growthTime:1e5,visualScale:1.5,pointValue:0,evolvesFrom:"cactus_small",defaultEvolution:"cactus_saguaro",specialEvolutions:[{evolutionId:"cactus_organ_pipe",trigger:{type:"combo_water",count:3},hint:"Rhythm of the desert..."}],rarity:"uncommon"},{id:"cactus_jade",name:"Jade Plant",emoji:"ðŸŒ²",seedId:"cactus",tier:3,growthTime:8e4,visualScale:1.2,pointValue:0,evolvesFrom:"cactus_succulent",defaultEvolution:"cactus_gem_plant",specialEvolutions:[{evolutionId:"cactus_money_tree",trigger:{type:"golden"},hint:"Golden fortune..."}],rarity:"uncommon"},{id:"cactus_rosette",name:"Rosette",emoji:"ï¿½",seedId:"cactus",tier:3,growthTime:75e3,visualScale:1.2,pointValue:0,evolvesFrom:"cactus_succulent",defaultEvolution:"cactus_echeveria",specialEvolutions:[{evolutionId:"cactus_desert_rose",trigger:{type:"neighbor_count",min:3},hint:"Roses need company..."}],rarity:"uncommon"},{id:"cactus_water_store",name:"Water Store",emoji:"ðŸ’§",seedId:"cactus",tier:4,growthTime:11e4,visualScale:1.5,pointValue:0,evolvesFrom:"cactus_barrel",defaultEvolution:"cactus_oasis",description:"Returns extra water on harvest!",rarity:"rare"},{id:"cactus_ancient_barrel",name:"Ancient Barrel",emoji:"ðŸº",seedId:"cactus",tier:4,growthTime:12e4,visualScale:1.6,pointValue:0,evolvesFrom:"cactus_barrel",defaultEvolution:"cactus_artifact",rarity:"epic"},{id:"cactus_saguaro",name:"Saguaro",emoji:"ðŸŒµ",seedId:"cactus",tier:4,growthTime:13e4,visualScale:1.8,pointValue:0,evolvesFrom:"cactus_tall",defaultEvolution:"cactus_desert_king",specialEvolutions:[{evolutionId:"cactus_eagle_perch",trigger:{type:"visitor_touch",visitor:"bluebird"},hint:"Birds of a feather..."}],rarity:"rare"},{id:"cactus_organ_pipe",name:"Organ Pipe",emoji:"ðŸŽµ",seedId:"cactus",tier:4,growthTime:11e4,visualScale:1.6,pointValue:0,evolvesFrom:"cactus_tall",defaultEvolution:"cactus_music",rarity:"rare"},{id:"cactus_gem_plant",name:"Gem Plant",emoji:"ï¿½",seedId:"cactus",tier:4,growthTime:1e5,visualScale:1.4,pointValue:0,evolvesFrom:"cactus_jade",defaultEvolution:"cactus_crystal",rarity:"rare"},{id:"cactus_money_tree",name:"Money Tree",emoji:"ðŸ’°",seedId:"cactus",tier:4,growthTime:12e4,visualScale:1.6,pointValue:0,evolvesFrom:"cactus_jade",defaultEvolution:"cactus_fortune",rarity:"epic"},{id:"cactus_echeveria",name:"Echeveria",emoji:"ï¿½ï¸",seedId:"cactus",tier:4,growthTime:95e3,visualScale:1.4,pointValue:0,evolvesFrom:"cactus_rosette",defaultEvolution:"cactus_queen",rarity:"uncommon"},{id:"cactus_desert_rose",name:"Desert Rose",emoji:"ðŸŒ¹",seedId:"cactus",tier:4,growthTime:1e5,visualScale:1.5,pointValue:0,evolvesFrom:"cactus_rosette",defaultEvolution:"cactus_rose_queen",rarity:"rare"},{id:"cactus_lithops",name:"Living Stone",emoji:"ðŸª¨",seedId:"cactus",tier:4,growthTime:15e4,visualScale:1.2,pointValue:0,evolvesFrom:"cactus_succulent",defaultEvolution:"cactus_ancient_stone",specialEvolutions:[{evolutionId:"cactus_crystal_cactus",trigger:{type:"neighbor_diverse",min:5},hint:"Diversity creates crystals..."}],rarity:"epic"},{id:"cactus_oasis",name:"Oasis",emoji:"ðŸï¸",seedId:"cactus",tier:5,growthTime:0,visualScale:1.8,pointValue:10,evolvesFrom:"cactus_water_store",defaultEvolution:null,rarity:"rare",description:"A desert miracle. Returns +5 water on harvest!"},{id:"cactus_artifact",name:"Desert Artifact",emoji:"ðŸº",seedId:"cactus",tier:5,growthTime:0,visualScale:1.7,pointValue:18,evolvesFrom:"cactus_ancient_barrel",defaultEvolution:null,rarity:"epic",description:"Ancient desert treasure."},{id:"cactus_desert_king",name:"Desert King",emoji:"ðŸ¦",seedId:"cactus",tier:5,growthTime:0,visualScale:2.2,pointValue:12,evolvesFrom:"cactus_saguaro",defaultEvolution:null,rarity:"epic",description:"Ruler of the arid lands."},{id:"cactus_eagle_perch",name:"Eagle Perch",emoji:"ðŸ¦…",seedId:"cactus",tier:5,growthTime:0,visualScale:2,pointValue:15,evolvesFrom:"cactus_saguaro",defaultEvolution:null,rarity:"epic",description:"Where eagles dare to rest."},{id:"cactus_music",name:"Music Cactus",emoji:"ðŸŽ¶",seedId:"cactus",tier:5,growthTime:0,visualScale:1.8,pointValue:11,evolvesFrom:"cactus_organ_pipe",defaultEvolution:null,rarity:"rare",description:"Plays desert melodies."},{id:"cactus_crystal",name:"Crystal Succulent",emoji:"ðŸ§Š",seedId:"cactus",tier:5,growthTime:0,visualScale:1.6,pointValue:14,evolvesFrom:"cactus_gem_plant",defaultEvolution:null,rarity:"epic",description:"Pure crystallized life."},{id:"cactus_fortune",name:"Fortune Plant",emoji:"ðŸ’°",seedId:"cactus",tier:5,growthTime:0,visualScale:1.9,pointValue:20,evolvesFrom:"cactus_money_tree",defaultEvolution:null,rarity:"epic",description:"Attracts wealth and prosperity."},{id:"cactus_queen",name:"Succulent Queen",emoji:"ðŸ‘¸",seedId:"cactus",tier:5,growthTime:0,visualScale:1.7,pointValue:11,evolvesFrom:"cactus_echeveria",defaultEvolution:null,rarity:"rare",description:"Royalty of the succulent world."},{id:"cactus_rose_queen",name:"Rose Queen",emoji:"ðŸŒ¹",seedId:"cactus",tier:5,growthTime:0,visualScale:1.8,pointValue:12,evolvesFrom:"cactus_desert_rose",defaultEvolution:null,rarity:"epic",description:"Beauty blooms in harsh lands."},{id:"cactus_ancient_stone",name:"Ancient Stone",emoji:"ðŸ—¿",seedId:"cactus",tier:5,growthTime:0,visualScale:1.6,pointValue:18,evolvesFrom:"cactus_lithops",defaultEvolution:null,rarity:"epic",description:"Older than memory."},{id:"cactus_crystal_cactus",name:"Prism Plant",emoji:"ðŸ’ ",seedId:"cactus",tier:5,growthTime:0,visualScale:1.8,pointValue:19,evolvesFrom:"cactus_lithops",defaultEvolution:null,specialEvolutions:[{evolutionId:"cactus_stardust",trigger:{type:"golden"},hint:"Golden prisms catch starlight..."}],rarity:"epic",description:"Refracts light into rainbows."},{id:"cactus_stardust",name:"Stardust",emoji:"ðŸ’«",seedId:"cactus",tier:6,growthTime:0,visualScale:2.2,pointValue:38,evolvesFrom:"cactus_crystal_cactus",defaultEvolution:null,isLegendary:!0,rarity:"legendary",description:"Made of actual stardust."}],k=[...ce,...he,...me,...pe,...ge,...ve],J=new Map,L=new Map;for(const s of k)J.set(s.id,s),L.has(s.seedId)||L.set(s.seedId,[]),L.get(s.seedId).push(s);function p(s){return J.get(s)}function fe(s){var e;return(e=L.get(s))==null?void 0:e.find(t=>t.tier===0)}function y(s){const e=p(s);return e?e.defaultEvolution===null&&e.pointValue>0:!1}function Z(s){const e=p(s);return(e==null?void 0:e.isLegendary)===!0}function _e(s){var e,t;return(t=(e=p(s))==null?void 0:e.visualScale)!=null?t:1}function W(s){var e,t;return(t=(e=p(s))==null?void 0:e.emoji)!=null?t:"â“"}function z(s){var a;const e=p(s);if(!e||!e.defaultEvolution)return 1/0;const t=p(e.defaultEvolution);if(!t)return 1/0;const i=t.growthTime;if(i===0||i===1/0)return i;const o=t.tier,n=(a=ae.TIER_MULTIPLIERS[o])!=null?a:1;return Math.round(i*n)}const Q={};var q;for(const s of k)Q[s.id]={id:s.id,seedId:s.seedId,rarity:(q=s.rarity)!=null?q:"common"};const ee=k.length,ye=k.filter(s=>s.pointValue>0).length,be=k.filter(s=>s.isLegendary).length;console.log(`ðŸŒ± Evolution system loaded: ${ee} evolutions across 6 seed types`);console.log(`   ðŸ“Š Harvestable: ${ye} | Legendary: ${be}`);const we={sprout:[{trait:"cheerful",weight:30},{trait:"bashful",weight:20},{trait:"dramatic",weight:15},{trait:"zen",weight:10},{trait:"curious",weight:15},{trait:"mysterious",weight:3},{trait:"sleepy",weight:4},{trait:"energetic",weight:3}],acorn:[{trait:"cheerful",weight:15},{trait:"bashful",weight:10},{trait:"dramatic",weight:10},{trait:"zen",weight:25},{trait:"curious",weight:20},{trait:"mysterious",weight:10},{trait:"sleepy",weight:5},{trait:"energetic",weight:5}],bean:[{trait:"cheerful",weight:20},{trait:"bashful",weight:10},{trait:"dramatic",weight:25},{trait:"zen",weight:5},{trait:"curious",weight:25},{trait:"mysterious",weight:5},{trait:"sleepy",weight:3},{trait:"energetic",weight:7}],bulb:[{trait:"cheerful",weight:15},{trait:"bashful",weight:25},{trait:"dramatic",weight:10},{trait:"zen",weight:15},{trait:"curious",weight:15},{trait:"mysterious",weight:10},{trait:"sleepy",weight:7},{trait:"energetic",weight:3}],spore:[{trait:"cheerful",weight:5},{trait:"bashful",weight:15},{trait:"dramatic",weight:20},{trait:"zen",weight:10},{trait:"curious",weight:15},{trait:"mysterious",weight:30},{trait:"sleepy",weight:3},{trait:"energetic",weight:2}],cactus:[{trait:"cheerful",weight:10},{trait:"bashful",weight:10},{trait:"dramatic",weight:15},{trait:"zen",weight:30},{trait:"curious",weight:10},{trait:"mysterious",weight:15},{trait:"sleepy",weight:5},{trait:"energetic",weight:5}]},Ee=[{trait:"cheerful",weight:15},{trait:"bashful",weight:15},{trait:"dramatic",weight:15},{trait:"zen",weight:10},{trait:"curious",weight:15},{trait:"mysterious",weight:10},{trait:"sleepy",weight:10},{trait:"energetic",weight:10}];function Te(s){const e=we[s]||Ee,t=e.reduce((o,n)=>o+n.weight,0);let i=Math.random()*t;for(const{trait:o,weight:n}of e)if(i-=n,i<=0)return o;return"cheerful"}const Se={sprout:{prefixes:["Petal","Bloom","Flora","Blossom","Daisy","Rose","Lily","Violet","Iris","Poppy"],suffixes:["belle","ina","ette","anne","ia"],standalone:["Petunia","Rosie","Lily","Violet","Daisy Mae","Blossom","Flora","Petal","Buttercup","Clover","Iris","Jasmine","Tulip","Dahlia","Zinnia","Magnolia","Camellia","Azalea","Daffodil","Marigold","Primrose","Heather","Holly","Ivy","Fern","Sage","Laurel","Lavender","Hyacinth","Wisteria"]},acorn:{prefixes:["Oak","Elm","Ash","Birch","Maple","Pine","Cedar","Willow","Alder","Rowan"],suffixes:["ley","wood","ton","bert","son"],standalone:["Oakley","Woody","Maple","Birch","Willow","Ashton","Cedar","Forrest","Sylvan","Arbor","Linden","Rowan","Alder","Aspen","Briar","Grove","Thorn","Branch","Timber","Acorn Jr.","Nutkin","Oaksworth","Sir Bark","Twiggy","Pinecone","Elmsworth","Sequoia","Redwood"]},bean:{prefixes:["Bean","Vine","Pepper","Gourd","Melon","Squash","Pea","Pod"],suffixes:["sley","kins","worth","ton","o"],standalone:["Jack","Beansley","Vinny","Pepper","Gourdian","Melonie","Squashley","Peabody","Lima","Fava","String Bean","Snapdragon","Pumpkin","Butternut","Zucchini","Cucumber","Pickle","Gherkin","JalapeÃ±o","Cayenne","Paprika","Chili","Climbing Jack","Bean Sprout","Sir Climbs-a-Lot","Tendril","Curly","Twister"]},bulb:{prefixes:["Onion","Garlic","Tulip","Carrot","Beet","Radish","Turnip","Potato"],suffixes:["sworth","ton","kins","bert","ia"],standalone:["Sir Onion","Garth","Tulip","Lotus","Bulba","Carrot Top","Beets","Radley","Turnsworth","Tater","Spud","Ginger","Shallot","Leek","Chive","Scallion","Pearl","Root","Digby","Earthling","Underground","Rootsworth","Sir Digs-a-Lot","Muddy","Buried Treasure","Daffodilia","Hyacinthia","Croakus"]},spore:{prefixes:["Shroom","Fungi","Myco","Spore","Cap","Gill","Moss","Lichen"],suffixes:["ling","bert","wick","shade","wood"],standalone:["Fungus","Shroom","Truffle","Portia","Chanty","Morel","Shiitake","Enoki","Porcini","Cremini","Button","Toadstool","Sporeling","Mycelium","Mildew","Shadowcap","Nightshade","Gloomkin","Duskbell","Mistling","Whisper","Murk","Twilight","Eclipse","Phantom","Spectre","Umbra","Nocturne","Vesper"]},cactus:{prefixes:["Spike","Prickle","Sandy","Desert","Dune","Succul","Agave","Aloe"],suffixes:["o","ita","sworth","ton","y"],standalone:["Spike","Sandy","Prickles","Aloe","Vera","Cactus Jack","Needles","Thorny","Dusty","Sunny","Sunburst","Oasis","Mirage","Sahara","Mojave","Sedona","Arizona","Saguaro","Agave","Yucca","Jade","Succulent Steve","Prickly Pete","Sandy Cheeks","Dryden","Arid","Solaris","Blaze","Scorchy"]}},Ie={prefixes:["Plant","Leaf","Green","Sprout","Bud","Stem","Root","Seed"],suffixes:["y","ie","ling","kins","bert"],standalone:["Planty","Leafy","Greenie","Sprouty","Buddy","Stemmy","Rooty","Seedling","Little One","Garden Friend","Chlorophyll","Photon","Sunbeam","Dewdrop","Rainfall"]};function Me(s){const e=Se[s]||Ie;if(Math.random()<.7)return e.standalone[Math.floor(Math.random()*e.standalone.length)];{const t=e.prefixes[Math.floor(Math.random()*e.prefixes.length)],i=e.suffixes[Math.floor(Math.random()*e.suffixes.length)];return t+i}}const j=300*1e3,Pe=900*1e3,Ae=600*1e3,te=[{type:"lonely",emoji:"ðŸŒ±",getText:s=>`${s.name} wants a friend nearby`,canAppear:(s,e)=>e.length===0,isFulfilled:(s,e)=>e.length>0,priority:10},{type:"want_visitor",emoji:"ðŸ¦‹",getText:s=>`${s.name} wants to meet a butterfly`,canAppear:s=>s.evoData.visitorTouches.length===0,isFulfilled:(s,e,t)=>t.visitorJustTouched!==void 0,priority:5},{type:"night_water",emoji:"ðŸŒ™",getText:s=>`${s.name} wants moonlit water`,canAppear:()=>Y(),isFulfilled:(s,e,t)=>t.justWatered===!0&&t.isNight===!0,priority:8},{type:"help_friend",emoji:"ðŸ’§",getText:(s,e)=>`${s.name} wants you to water ${(e==null?void 0:e.name)||"their friend"}`,canAppear:(s,e)=>e.find(i=>{var n;const o=(n=s.neighborBonds)==null?void 0:n.find(a=>a.plantId===i.id);return o&&(o.level==="friend"||o.level==="bestFriend"||o.level==="soulmate")&&!i.isWatered})!==void 0,isFulfilled:(s,e)=>{const t=e.find(i=>{var n;const o=(n=s.neighborBonds)==null?void 0:n.find(a=>a.plantId===i.id);return o&&(o.level==="friend"||o.level==="bestFriend"||o.level==="soulmate")});return(t==null?void 0:t.isWatered)===!0},priority:12},{type:"grow_tall",emoji:"ðŸ“ˆ",getText:s=>`${s.name} dreams of growing bigger`,canAppear:s=>!y(s.evolutionId)&&s.growthProgress<.3,isFulfilled:s=>s.growthProgress>=.8||y(s.evolutionId),priority:4},{type:"make_friend",emoji:"ðŸ’•",getText:(s,e)=>`${s.name} wants to befriend ${(e==null?void 0:e.name)||"someone"}`,canAppear:(s,e)=>e.find(i=>{var n;const o=(n=s.neighborBonds)==null?void 0:n.find(a=>a.plantId===i.id);return o&&o.level==="acquaintance"})!==void 0,isFulfilled:(s,e)=>e.some(t=>{var o;const i=(o=s.neighborBonds)==null?void 0:o.find(n=>n.plantId===t.id);return i&&i.level!=="acquaintance"}),priority:7},{type:"sunny_spot",emoji:"â˜€ï¸",getText:s=>`${s.name} wants to be surrounded by friends`,canAppear:(s,e)=>e.length>=1&&e.length<4,isFulfilled:(s,e)=>e.length>=4,priority:3}];function Ce(s,e){if(s.activeWish&&e<s.activeWish.expiresAt)return!1;const t=s.lastWishTime||s.evoData.plantedTime,i=e-t;if(i<j)return!1;const o=Math.min((i-j)/(Pe-j),1);return Math.random()<o*.1}function Fe(s,e,t,i){const o=te.filter(u=>u.canAppear(s,e,t));if(o.length===0)return null;const n=o.reduce((u,f)=>u+f.priority,0);let a=Math.random()*n,r=null;for(const u of o)if(a-=u.priority,a<=0){r=u;break}r||(r=o[0]);let d;return(r.type==="help_friend"||r.type==="make_friend")&&(d=e.find(u=>{var m;const f=(m=s.neighborBonds)==null?void 0:m.find(b=>b.plantId===u.id);return r.type==="help_friend"?f&&f.level!=="acquaintance"&&!u.isWatered:f&&f.level==="acquaintance"})),{type:r.type,text:r.getText(s,d),emoji:r.emoji,targetId:d==null?void 0:d.id,createdAt:i,expiresAt:i+Ae}}function ke(s,e,t){if(!s.activeWish)return!1;const i=te.find(o=>o.type===s.activeWish.type);return i?i.isFulfilled(s,e,t):!1}function xe(s,e){return e>=s.expiresAt}class Le{constructor(e,t,i,o,n,a){l(this,"config");l(this,"plants");l(this,"gridElement");l(this,"onEvent");l(this,"canUseWater");l(this,"getSelectedSeed");l(this,"getGameState");l(this,"tiles",new Map);l(this,"plantElements",new Map);l(this,"draggedPlant",null);l(this,"dragStartPos",{x:0,y:0});l(this,"isDragPlanting",!1);l(this,"dragPlantedTiles",new Set);l(this,"recentWaters",[]);l(this,"tooltip",null);l(this,"hoveredPlant",null);l(this,"tooltipDelayTimer",null);l(this,"TOOLTIP_DELAY",500);l(this,"lastBondCheck",0);l(this,"lastBondParticle",0);l(this,"BOND_CHECK_INTERVAL",5e3);l(this,"BOND_PARTICLE_COOLDOWN",3e4);l(this,"lastWishCheck",0);l(this,"WISH_CHECK_INTERVAL",1e4);l(this,"lastElderCheck",0);l(this,"ELDER_CHECK_INTERVAL",3e4);l(this,"harvestConfirmOverlay",null);l(this,"pendingHarvestPlant",null);l(this,"onRetirePlant",null);this.config=P,this.plants=e,this.gridElement=t,this.onEvent=i,this.canUseWater=o,this.getSelectedSeed=n,this.getGameState=a}render(){this.gridElement.innerHTML="",this.tiles.clear(),this.plantElements.clear(),this.gridElement.style.setProperty("--grid-size",this.config.gridSize.toString()),this.setupDragPlantHandlers(),this.createTooltip();for(let e=0;e<this.config.gridSize;e++)for(let t=0;t<this.config.gridSize;t++){const i=this.createTile(t,e);this.gridElement.appendChild(i),this.tiles.set(`${t},${e}`,i)}for(const e of this.plants)this.renderPlant(e)}setupDragPlantHandlers(){this.gridElement.addEventListener("mousedown",e=>this.handleDragPlantStart(e)),this.gridElement.addEventListener("mousemove",e=>this.handleDragPlantMove(e)),this.gridElement.addEventListener("mouseup",()=>this.handleDragPlantEnd()),this.gridElement.addEventListener("mouseleave",()=>this.handleDragPlantEnd()),this.gridElement.addEventListener("touchstart",e=>this.handleDragPlantStart(e),{passive:!1}),this.gridElement.addEventListener("touchmove",e=>this.handleDragPlantMove(e),{passive:!1}),this.gridElement.addEventListener("touchend",()=>this.handleDragPlantEnd()),this.gridElement.addEventListener("touchcancel",()=>this.handleDragPlantEnd())}handleDragPlantStart(e){const t=e.target;if(!t.classList.contains("tile"))return;const i=parseInt(t.dataset.x||"0"),o=parseInt(t.dataset.y||"0");this.getPlantAt(i,o)||(this.isDragPlanting=!0,this.dragPlantedTiles.clear(),this.plantSeedIfEmpty(i,o),e.preventDefault())}handleDragPlantMove(e){if(!this.isDragPlanting)return;let t,i;if(e instanceof TouchEvent){if(e.touches.length===0)return;t=e.touches[0].clientX,i=e.touches[0].clientY,e.preventDefault()}else t=e.clientX,i=e.clientY;const o=this.getTileAtPosition(t,i);if(o){const n=parseInt(o.dataset.x||"0"),a=parseInt(o.dataset.y||"0");this.plantSeedIfEmpty(n,a)}}handleDragPlantEnd(){this.isDragPlanting=!1,this.dragPlantedTiles.clear()}getTileAtPosition(e,t){for(const[i,o]of this.tiles){const n=o.getBoundingClientRect();if(e>=n.left&&e<=n.right&&t>=n.top&&t<=n.bottom)return o}return null}plantSeedIfEmpty(e,t){const i=`${e},${t}`;this.dragPlantedTiles.has(i)||this.getPlantAt(e,t)||(this.plantSeed(e,t),this.dragPlantedTiles.add(i))}createTile(e,t){const i=document.createElement("div");return i.className="tile",i.dataset.x=e.toString(),i.dataset.y=t.toString(),i.addEventListener("click",o=>this.handleTileClick(e,t,o)),i}handleTileClick(e,t,i){if(this.draggedPlant||this.dragPlantedTiles.size>0)return;const o=this.getPlantAt(e,t);if(o)if(y(o.evolutionId)){const{needsConfirm:n,reason:a}=this.shouldConfirmHarvest(o);n?this.showHarvestConfirmation(o,a||""):this.harvestPlant(o)}else o.isWatered||(this.canUseWater()?this.waterPlant(o):this.onEvent({type:"water_changed",amount:0}))}plantSeed(e,t){const i=this.getSelectedSeed(),o=fe(i);if(!o)return;const n=Math.random()<S.GOLDEN_CHANCE,a=Me(i),r=Te(i),d={id:`plant_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,seedId:i,evolutionId:o.id,position:{x:e,y:t},isWatered:!1,waterCount:0,growthProgress:0,lastUpdateTime:Date.now(),isGolden:n,growthBoost:1,name:a,personality:r,neighborBonds:[],evoData:K()};this.plants.push(d),this.renderPlant(d,!0),this.onEvent({type:"plant_placed",plant:d})}waterPlantAt(e,t,i=!1){const o=this.getPlantAt(e,t);return o&&!o.isWatered?(this.waterPlant(o,i),!0):!1}waterPlant(e,t=!1){const i=Date.now(),o=Y();e.isWatered=!0,e.waterCount=(e.waterCount||0)+1,e.lastUpdateTime=i,o&&e.evoData.nightWaterCount++;const n=this.plantElements.get(e.id);n&&(n.classList.add("watered"),e.waterCount>1&&this.showDiminishingReturnsFeedback(e,n));const a=this.tiles.get(`${e.position.x},${e.position.y}`);a&&a.classList.add("watered"),this.onEvent({type:"plant_watered",plant:e,isFreeWater:t,isNight:o}),this.trackComboWater(e,i)}showDiminishingReturnsFeedback(e,t){const i=this.getWaterEffectiveness(e.waterCount),o=Math.round(i*100),n=document.createElement("div");n.className="water-diminished-feedback",n.textContent=`${o}%`,n.style.cssText=`
      position: absolute;
      top: -5px;
      right: -5px;
      font-size: 0.7rem;
      color: ${o<=25?"#f88":"#ff0"};
      font-weight: bold;
      animation: diminish-fade 1.5s ease-out forwards;
      pointer-events: none;
      z-index: 100;
    `,t.style.position="relative",t.appendChild(n),setTimeout(()=>n.remove(),1500)}getWaterEffectiveness(e){const t=Math.min(e-1,B.DIMINISHING_RETURNS.length-1);return t<0?1:Math.max(B.DIMINISHING_RETURNS[t],B.MIN_EFFECTIVENESS)}trackComboWater(e,t){this.recentWaters.push({plant:e,time:t});const i=t-S.COMBO_WINDOW;if(this.recentWaters=this.recentWaters.filter(o=>o.time>=i),this.recentWaters.length>=S.COMBO_MIN_SIZE){const o=this.recentWaters.map(n=>n.plant);for(const n of o){n.growthBoost=S.COMBO_GROWTH_BOOST,n.evoData.comboWaterCount++;const a=this.plantElements.get(n.id);a&&(a.classList.add("combo-boosted"),setTimeout(()=>a.classList.remove("combo-boosted"),3e3))}this.onEvent({type:"combo_watered",plants:o,comboSize:o.length}),this.recentWaters=[]}}harvestPlant(e,t=!1){const i=p(e.evolutionId);if(!i)return;this.triggerGriefOnBondedPlants(e);let o=i.pointValue;e.isGolden&&(o*=S.GOLDEN_MULTIPLIER);const n=this.countSameSeedNeighbors(e);o=Math.round(o*(1+n*S.NEIGHBOR_BONUS));const a=this.getPlantElderTier(e);a!=="none"&&(o=Math.round(o*(a==="legendary"?3:a==="ancient"?2:1.5))),t&&(o=Math.round(o*1.5));const r=this.plantElements.get(e.id);r?(r.classList.add("harvesting"),setTimeout(()=>{this.removePlantVisual(e)},300)):this.removePlantVisual(e);const d=this.plants.indexOf(e);d>-1&&this.plants.splice(d,1),e.activeWish&&this.hideWishBubble(e),t&&this.onEvent({type:"plant_retired",plant:e}),this.onEvent({type:"plant_harvested",plant:e,points:o,wasGolden:e.isGolden||!1,evolutionId:e.evolutionId})}countSameSeedNeighbors(e){const{x:t,y:i}=e.position,o=[{dx:-1,dy:0},{dx:1,dy:0},{dx:0,dy:-1},{dx:0,dy:1}];let n=0;for(const{dx:a,dy:r}of o){const d=this.getPlantAt(t+a,i+r);d&&d.seedId===e.seedId&&n++}return n}getAllNeighbors(e){return de(e.position,this.config.gridSize).map(i=>this.getPlantAt(i.x,i.y)).filter(i=>i!==void 0)}removePlantVisual(e){const t=this.plantElements.get(e.id);t&&(t.remove(),this.plantElements.delete(e.id));const i=this.tiles.get(`${e.position.x},${e.position.y}`);i&&i.classList.remove("watered")}renderPlant(e,t=!1){const i=this.tiles.get(`${e.position.x},${e.position.y}`);if(!i)return;const o=i.querySelector(".plant");o&&o.remove();const n=document.createElement("div");n.className="plant",n.textContent=W(e.evolutionId),n.dataset.plantId=e.id;const a=_e(e.evolutionId);a!==1&&(n.style.transform=`scale(${a})`),e.isWatered&&(n.classList.add("watered"),i.classList.add("watered")),e.isGolden&&n.classList.add("golden"),t&&n.classList.add("planted"),this.setupPlantDrag(n,e),this.setupPlantHover(n,e),i.appendChild(n),this.plantElements.set(e.id,n)}setupPlantHover(e,t){e.addEventListener("mouseenter",i=>{if(!this.draggedPlant){this.tooltipDelayTimer&&clearTimeout(this.tooltipDelayTimer);const o=i.clientX,n=i.clientY;this.tooltipDelayTimer=window.setTimeout(()=>{this.showTooltip(t,o,n)},this.TOOLTIP_DELAY)}}),e.addEventListener("mousemove",i=>{this.hoveredPlant===t&&!this.draggedPlant&&this.positionTooltip(i.clientX,i.clientY)}),e.addEventListener("mouseleave",()=>{this.tooltipDelayTimer&&(clearTimeout(this.tooltipDelayTimer),this.tooltipDelayTimer=null),this.hideTooltip()})}setupPlantDrag(e,t){let i=!1,o=0,n=0,a=0,r=0,d=null;const u=(h,c)=>{o=h,n=c,this.dragStartPos={x:h,y:c};const g=e.getBoundingClientRect();a=h-g.left,r=c-g.top},f=(h,c)=>{const g=Math.abs(h-o),_=Math.abs(c-n);!i&&(g>$.DRAG_THRESHOLD||_>$.DRAG_THRESHOLD)&&(i=!0,this.draggedPlant=t,d=e.cloneNode(!0),d.style.cssText=`
          position: fixed;
          pointer-events: none;
          z-index: 10000;
          opacity: 0.9;
          transition: none;
          transform: none;
          left: ${h-a}px;
          top: ${c-r}px;
        `,document.body.appendChild(d),e.style.opacity="0.3",this.highlightMergeTargets(t),this.hideTooltip()),i&&d&&(d.style.left=`${h-a}px`,d.style.top=`${c-r}px`)},m=(h,c)=>{if(i){d&&(d.remove(),d=null),e.style.opacity="",this.clearMergeHighlights();const g=this.findDropTarget(h,c,t);g&&this.attemptMerge(t,g),i=!1,this.draggedPlant=null}};e.addEventListener("mousedown",h=>{h.preventDefault(),u(h.clientX,h.clientY);const c=_=>f(_.clientX,_.clientY),g=_=>{m(_.clientX,_.clientY),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",g)};document.addEventListener("mousemove",c),document.addEventListener("mouseup",g)});let b=!1;e.addEventListener("touchstart",h=>{b=!0;const c=h.touches[0];u(c.clientX,c.clientY)},{passive:!0}),e.addEventListener("touchmove",h=>{if(!b)return;const c=h.touches[0];f(c.clientX,c.clientY)},{passive:!0}),e.addEventListener("touchend",h=>{if(!b)return;b=!1;const c=h.changedTouches[0];m(c.clientX,c.clientY)}),e.addEventListener("touchcancel",()=>{b=!1,i&&m(o,n)})}highlightMergeTargets(e){for(const t of this.plants)if(t.id!==e.id&&this.canMerge(e,t)){const i=this.plantElements.get(t.id);i&&i.classList.add("merge-target");const o=this.tiles.get(`${t.position.x},${t.position.y}`);o&&o.classList.add("drop-target")}}clearMergeHighlights(){for(const[,e]of this.plantElements)e.classList.remove("merge-target");for(const[,e]of this.tiles)e.classList.remove("drop-target")}canMerge(e,t){return e.seedId===t.seedId&&e.evolutionId===t.evolutionId&&e.isWatered&&t.isWatered&&!y(t.evolutionId)}findDropTarget(e,t,i){for(const[o,n]of this.tiles){const a=n.getBoundingClientRect();if(e>=a.left&&e<=a.right&&t>=a.top&&t<=a.bottom){const[r,d]=o.split(",").map(Number),u=this.getPlantAt(r,d);if(u&&u.id!==i.id&&this.canMerge(i,u))return u}}return null}attemptMerge(e,t){const i=p(t.evolutionId);if(!i||!i.defaultEvolution)return;const o=i.defaultEvolution,n=p(o);if(!n)return;t.evolutionId=o,t.isWatered=!1,t.growthProgress=0,t.waterCount=0,e.isGolden&&!t.isGolden&&(t.isGolden=!0);const a=this.plants.indexOf(e);a>-1&&this.plants.splice(a,1),this.removePlantVisual(e);const r=this.plantElements.get(t.id);if(r){r.textContent=n.emoji,r.classList.add("growing"),r.classList.remove("watered"),setTimeout(()=>r.classList.remove("growing"),600);const u=n.visualScale;u!==1&&(r.style.transform=`scale(${u})`)}const d=this.tiles.get(`${t.position.x},${t.position.y}`);d&&d.classList.remove("watered"),this.onEvent({type:"plants_merged",source:e,target:t,result:t})}updateGrowth(e=1,t){const i=Date.now(),o=this.getGameState();for(const n of this.plants){if(!n.isWatered)continue;const a=p(n.evolutionId);if(!a||y(n.evolutionId))continue;const r=n.griefState?n.griefState.since+n.griefState.duration:0,d=n.griefState&&r>i,u=z(n.evolutionId);if(u===1/0)continue;const f=i-n.lastUpdateTime;let m=1;if(m*=e,n.growthBoost&&n.growthBoost>1&&(m*=n.growthBoost),n.isGolden&&(m*=1.5),t){const _=Math.abs(n.position.x-t.x),E=Math.abs(n.position.y-t.y);_<=1&&E<=1&&(m*=1+S.FARMER_PROXIMITY_BONUS,n.evoData.farmerBoostTicks++)}const b=this.getTotalBondBoost(n);b>0&&(m*=1+b);const h=this.getElderAuraBoostForPlant(n);h>0&&(m*=1+h),d&&(m*=.5);const c=this.getWaterEffectiveness(n.waterCount||1);m*=c;const g=f*m/u;if(n.growthProgress+=g,n.lastUpdateTime=i,n.growthProgress>=1){n.growthProgress=0;const _=this.getAllNeighbors(n),E=ue(a,n,n.evoData,_,{totalMerges:o.totalMerges,currentHour:new Date().getHours(),currentMonth:new Date().getMonth()+1});if(E){const D=E!==a.defaultEvolution,ie=n.evolutionId;n.evolutionId=E,n.isWatered=!1,n.waterCount=0,this.updatePlantVisual(n,D),this.onEvent({type:"plant_evolved",plant:n,fromEvolution:ie,toEvolution:E,isSpecial:D}),p(E)&&this.onEvent({type:"evolution_discovered",evolutionId:E,isLegendary:Z(E)})}}}}updatePlantVisual(e,t=!1){const i=this.plantElements.get(e.id);if(!i)return;const o=p(e.evolutionId);if(!o)return;i.textContent=o.emoji,i.classList.remove("watered"),i.classList.add(t?"special-evolving":"evolving");const n=o.visualScale;n!==1&&(i.style.transform=`scale(${n})`),setTimeout(()=>{i.classList.remove("evolving","special-evolving")},t?1e3:800);const a=this.tiles.get(`${e.position.x},${e.position.y}`);a&&a.classList.remove("watered")}applyOfflineGrowth(e,t){const i=[];for(const o of this.plants){if(!o.isWatered)continue;let n=0,a=e*t;for(;a>0&&!y(o.evolutionId);){const r=z(o.evolutionId);if(r===1/0)break;const d=r*(1-o.growthProgress);if(a>=d){const u=p(o.evolutionId);if(u!=null&&u.defaultEvolution)o.evolutionId=u.defaultEvolution,o.growthProgress=0,n++;else break;a-=d}else{o.growthProgress+=a/r;break}}n>0&&(i.push({plant:o,evolutions:n}),this.updatePlantVisual(o,!1))}return i}getPlantAt(e,t){return this.plants.find(i=>i.position.x===e&&i.position.y===t)}getPlants(){return this.plants}getGridSize(){return this.config.gridSize}markVisitorTouch(e,t){const i=this.plants.find(o=>o.id===e);i&&!i.evoData.visitorTouches.includes(t)&&(i.evoData.visitorTouches.push(t),this.onEvent({type:"visitor_touched_plant",plant:i,visitorType:t}))}createTooltip(){this.tooltip&&this.tooltip.remove(),this.tooltip=document.createElement("div"),this.tooltip.className="plant-tooltip",this.tooltip.style.cssText=`
      position: fixed;
      background: rgba(20, 20, 20, 0.85);
      color: white;
      padding: 6px 10px;
      border-radius: 8px;
      font-size: 12px;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.15s ease;
      z-index: 2000;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    `,document.body.appendChild(this.tooltip)}showTooltip(e,t,i){if(!this.tooltip)return;this.hoveredPlant=e;const o=p(e.evolutionId),n=Date.now()-e.evoData.plantedTime,a=this.formatAge(n),r=e.name||"Unknown",d=(o==null?void 0:o.emoji)||"ðŸŒ±",u=e.isGolden?" âœ¨":"";this.tooltip.innerHTML=`${d} <strong>${r}</strong>${u} â€¢ ${a}`,this.tooltip.style.opacity="1",this.positionTooltip(t,i)}positionTooltip(e,t){if(!this.tooltip)return;const i=this.tooltip.getBoundingClientRect(),o=15;let n=e+o,a=t-i.height-o;n+i.width>window.innerWidth-o&&(n=e-i.width-o),a<o&&(a=t+o),this.tooltip.style.left=`${n}px`,this.tooltip.style.top=`${a}px`}hideTooltip(){this.tooltip&&(this.tooltip.style.opacity="0"),this.hoveredPlant=null}formatAge(e){const t=Math.floor(e/6e4),i=Math.floor(t/60),o=Math.floor(i/24);return o>0?`${o} day${o>1?"s":""}`:i>0?`${i} hour${i>1?"s":""}`:t>0?`${t} min`:"Just planted"}getVisitorEmoji(e){return{butterfly:"ðŸ¦‹",bee:"ðŸ",rabbit:"ðŸ°",bluebird:"ðŸ¦"}[e]||"ðŸ¾"}capitalizeFirst(e){return e.charAt(0).toUpperCase()+e.slice(1)}calculateBondLevel(e){return e>=T.SOULMATE_TIME?"soulmate":e>=T.BEST_FRIEND_TIME?"bestFriend":e>=T.FRIEND_TIME?"friend":"acquaintance"}getBondBoost(e){switch(e){case"soulmate":return T.SOULMATE_BOOST;case"bestFriend":return T.BEST_FRIEND_BOOST;case"friend":return T.FRIEND_BOOST;default:return 0}}getGriefDuration(e){switch(e){case"soulmate":return T.SOULMATE_GRIEF;case"bestFriend":return T.BEST_FRIEND_GRIEF;case"friend":return T.FRIEND_GRIEF;default:return 0}}updateNeighborBonds(){const e=Date.now();if(!(e-this.lastBondCheck<this.BOND_CHECK_INTERVAL)){this.lastBondCheck=e;for(const t of this.plants){t.neighborBonds||(t.neighborBonds=[]);const i=this.getAllNeighbors(t),o=new Set(i.map(n=>n.id));t.neighborBonds=t.neighborBonds.filter(n=>o.has(n.plantId));for(const n of i){const a=t.neighborBonds.find(r=>r.plantId===n.id);if(!a)t.neighborBonds.push({plantId:n.id,since:e,level:"acquaintance"});else{const r=e-a.since,d=this.calculateBondLevel(r);d!==a.level&&this.isHigherBondLevel(d,a.level)&&(a.level=d,this.onEvent({type:"bond_formed",plant1:t,plant2:n,level:d}),this.updatePlantBondVisuals(t),this.updatePlantBondVisuals(n))}}t.griefState&&e-t.griefState.since>=t.griefState.duration&&(t.griefState=void 0,this.updatePlantGriefVisual(t,!1))}this.maybeShowBondParticle(e)}}isHigherBondLevel(e,t){const i=["acquaintance","friend","bestFriend","soulmate"];return i.indexOf(e)>i.indexOf(t)}updatePlantBondVisuals(e){var o;const t=this.plantElements.get(e.id);if(!t)return;t.classList.remove("bond-friend","bond-bestfriend","bond-soulmate");const i=(o=e.neighborBonds)==null?void 0:o.reduce((n,a)=>this.isHigherBondLevel(a.level,n)?a.level:n,"acquaintance");i==="soulmate"?t.classList.add("bond-soulmate"):i==="bestFriend"?t.classList.add("bond-bestfriend"):i==="friend"&&t.classList.add("bond-friend")}updatePlantGriefVisual(e,t){const i=this.plantElements.get(e.id);i&&(t?i.classList.add("grieving"):i.classList.remove("grieving"))}triggerGriefOnBondedPlants(e){const t=Date.now(),i=e.name||"a friend";for(const o of this.plants){if(!o.neighborBonds)continue;const n=o.neighborBonds.find(a=>a.plantId===e.id);if(n&&n.level!=="acquaintance"){const a=this.getGriefDuration(n.level);a>0&&(o.griefState={mourning:i,since:t,duration:a},this.updatePlantGriefVisual(o,!0),this.onEvent({type:"plant_grieving",plant:o,lostFriend:i}))}}}maybeShowBondParticle(e){if(e-this.lastBondParticle<this.BOND_PARTICLE_COOLDOWN)return;const t=[];for(const i of this.plants)if(i.neighborBonds){for(const o of i.neighborBonds)if(o.level!=="acquaintance"){const n=this.plants.find(a=>a.id===o.plantId);n&&i.id<n.id&&t.push({plant1:i,plant2:n,level:o.level})}}if(t.length>0){const i=t.reduce((o,n)=>{const a=n.level==="soulmate"?.15:n.level==="bestFriend"?.1:.05;return o+a},0);if(Math.random()<i){const o=t[Math.floor(Math.random()*t.length)];this.showBondParticle(o.plant1,o.plant2,o.level),this.lastBondParticle=e}}}showBondParticle(e,t,i){const o=this.plantElements.get(e.id),n=this.plantElements.get(t.id);if(!o||!n)return;const a=o.getBoundingClientRect(),r=n.getBoundingClientRect(),d=document.createElement("div");d.textContent="ðŸ’•",d.style.cssText=`
      position: fixed;
      left: ${(a.left+r.left)/2+a.width/2}px;
      top: ${(a.top+r.top)/2}px;
      font-size: 16px;
      pointer-events: none;
      z-index: 1500;
      animation: bond-float 2s ease-out forwards;
      opacity: 0;
    `,document.body.appendChild(d),requestAnimationFrame(()=>{d.style.opacity="1"}),setTimeout(()=>{d.remove()},2e3)}getTotalBondBoost(e){if(!e.neighborBonds||e.neighborBonds.length===0)return 0;let t=0;for(const i of e.neighborBonds)t+=this.getBondBoost(i.level);return Math.min(t,.5)}getElderAuraBoostForPlant(e){const t=this.getAllNeighbors(e);let i=0;for(const o of t){const n=this.getPlantElderTier(o);i+=this.getElderAuraBoost(n)}return Math.min(i,.5)}shouldConfirmHarvest(e){const t=this.getStrongestBond(e),i=this.getPlantElderTier(e);if(t==="soulmate"){const o=this.getBondedPlantNames(e);return{needsConfirm:!0,reason:`${e.name||"This plant"} is soulmates with ${o.join(", ")}. They will grieve for a long time.`}}return i==="legendary"?{needsConfirm:!0,reason:`${e.name||"This plant"} is a legendary elder! Its wisdom benefits the entire garden.`}:i==="ancient"?{needsConfirm:!0,reason:`${e.name||"This plant"} is an ancient elder. Are you sure you want to harvest it?`}:{needsConfirm:!1}}calculateElderTier(e){return e>=w.LEGENDARY_TIME?"legendary":e>=w.ANCIENT_TIME?"ancient":e>=w.ELDER_TIME?"elder":"none"}getElderAuraBoost(e){switch(e){case"legendary":return w.LEGENDARY_AURA_BOOST;case"ancient":return w.ANCIENT_AURA_BOOST;case"elder":return w.ELDER_AURA_BOOST;default:return 0}}updateElderStatus(){const e=Date.now();if(!(e-this.lastElderCheck<this.ELDER_CHECK_INTERVAL)){this.lastElderCheck=e;for(const t of this.plants){if(!y(t.evolutionId))continue;if(!t.maxedAt){t.maxedAt=e;continue}const i=e-t.maxedAt,o=this.calculateElderTier(i),n=this.getPlantElderTier(t);o!==n&&this.isHigherElderTier(o,n)&&(this.updatePlantElderVisual(t,o),this.onEvent({type:"elder_reached",plant:t,tier:o}))}}}getPlantElderTier(e){if(!y(e.evolutionId)||!e.maxedAt)return"none";const t=Date.now()-e.maxedAt;return this.calculateElderTier(t)}isHigherElderTier(e,t){const i=["none","elder","ancient","legendary"];return i.indexOf(e)>i.indexOf(t)}updatePlantElderVisual(e,t){const i=this.plantElements.get(e.id);i&&(i.classList.remove("elder","ancient","legendary-elder"),t==="legendary"?i.classList.add("legendary-elder"):t==="ancient"?i.classList.add("ancient"):t==="elder"&&i.classList.add("elder"))}updateWishes(){const e=Date.now();if(!(e-this.lastWishCheck<this.WISH_CHECK_INTERVAL)){this.lastWishCheck=e;for(const t of this.plants)if(t.activeWish&&xe(t.activeWish,e)&&(t.activeWish=void 0,t.lastWishTime=e,this.hideWishBubble(t)),!t.activeWish&&Ce(t,e)){const i=this.getAllNeighbors(t),o=Fe(t,i,this.plants,e);o&&(t.activeWish=o,this.showWishBubble(t,o),this.onEvent({type:"wish_appeared",plant:t,wish:o}))}}}checkWishFulfillment(e){for(const t of this.plants){if(!t.activeWish)continue;const i=this.getAllNeighbors(t);if(ke(t,i,e)){const o=t.activeWish;t.activeWish=void 0,t.lastWishTime=Date.now(),this.hideWishBubble(t),this.showWishFulfilledEffect(t),this.onEvent({type:"wish_fulfilled",plant:t,wish:o})}}}showWishBubble(e,t){const i=this.plantElements.get(e.id);if(!i)return;const o=i.querySelector(".wish-bubble");o&&o.remove();const n=document.createElement("div");n.className="wish-bubble",n.innerHTML=`<span class="wish-emoji">${t.emoji}</span>`,n.title=t.text,i.appendChild(n)}hideWishBubble(e){const t=this.plantElements.get(e.id);if(!t)return;const i=t.querySelector(".wish-bubble");i&&(i.classList.add("fading"),setTimeout(()=>i.remove(),300))}showWishFulfilledEffect(e){if(!this.plantElements.get(e.id))return;const i=this.tiles.get(`${e.position.x},${e.position.y}`);if(i)for(let o=0;o<3;o++)setTimeout(()=>{const n=document.createElement("div");n.className="wish-fulfilled-heart",n.textContent="ðŸ’–",n.style.setProperty("--offset",`${(Math.random()-.5)*40}px`),i.appendChild(n),setTimeout(()=>n.remove(),1e3)},o*100)}getStrongestBond(e){return!e.neighborBonds||e.neighborBonds.length===0?"acquaintance":e.neighborBonds.reduce((t,i)=>this.isHigherBondLevel(i.level,t)?i.level:t,"acquaintance")}getBondedPlantNames(e){return e.neighborBonds?e.neighborBonds.filter(t=>t.level!=="acquaintance").map(t=>{const i=this.plants.find(o=>o.id===t.plantId);return(i==null?void 0:i.name)||"Unknown"}):[]}setRetireCallback(e){this.onRetirePlant=e}showHarvestConfirmation(e,t){this.pendingHarvestPlant=e;const i=this.getPlantElderTier(e),o=W(e.evolutionId),n=i==="legendary"||i==="ancient";this.harvestConfirmOverlay=document.createElement("div"),this.harvestConfirmOverlay.className="harvest-confirm-overlay",this.harvestConfirmOverlay.innerHTML=`
      <div class="harvest-confirm-modal">
        <div class="plant-preview">${o}</div>
        <h3>${e.name||"This Plant"}</h3>
        <p>${t}</p>
        <div class="harvest-confirm-buttons">
          <button class="btn-cancel">Keep Growing</button>
          ${n?'<button class="btn-retire">ðŸ›ï¸ Retire</button>':""}
          <button class="btn-harvest-confirm">Harvest</button>
        </div>
      </div>
    `,document.body.appendChild(this.harvestConfirmOverlay);const a=this.harvestConfirmOverlay.querySelector(".btn-cancel"),r=this.harvestConfirmOverlay.querySelector(".btn-retire"),d=this.harvestConfirmOverlay.querySelector(".btn-harvest-confirm");a==null||a.addEventListener("click",()=>this.closeHarvestConfirmation()),r==null||r.addEventListener("click",()=>{this.pendingHarvestPlant&&this.onRetirePlant&&(this.onRetirePlant(this.pendingHarvestPlant),this.harvestPlant(this.pendingHarvestPlant,!0)),this.closeHarvestConfirmation()}),d==null||d.addEventListener("click",()=>{this.pendingHarvestPlant&&this.harvestPlant(this.pendingHarvestPlant),this.closeHarvestConfirmation()}),this.harvestConfirmOverlay.addEventListener("click",u=>{u.target===this.harvestConfirmOverlay&&this.closeHarvestConfirmation()})}closeHarvestConfirmation(){this.harvestConfirmOverlay&&(this.harvestConfirmOverlay.remove(),this.harvestConfirmOverlay=null),this.pendingHarvestPlant=null}getWishesGrantedCount(e){return 0}}class Ve{constructor(e,t,i){l(this,"state");l(this,"element");l(this,"gridSize");l(this,"moveInterval",null);l(this,"actionInterval",null);l(this,"autoWaterInterval",null);l(this,"onTapped",null);l(this,"onAutoWater",null);this.state=e,this.gridSize=i,this.element=document.getElementById("farmer"),this.updatePosition(),this.startBehavior(),this.setupTapHandler()}setOnTapped(e){this.onTapped=e}setupTapHandler(){this.element.style.cursor="pointer",this.element.addEventListener("click",e=>{e.stopPropagation(),this.onTapped&&this.onTapped()})}setOnAutoWater(e){this.onAutoWater=e,this.autoWaterInterval&&clearInterval(this.autoWaterInterval),this.autoWaterInterval=window.setInterval(()=>{this.onAutoWater&&this.state.currentAction==="idle"&&(this.setAction("watering"),setTimeout(()=>{var t;(t=this.onAutoWater)==null||t.call(this),this.setAction("idle")},500))},S.FARMER_AUTO_WATER_INTERVAL)}getPosition(){return x({},this.state.position)}callTo(e){this.setAction("walking"),this.state.targetPosition=e,this.animateWalkTo(e)}animateWalkTo(e){const t=e.x-this.state.position.x,i=e.y-this.state.position.y;if(t===0&&i===0){this.react("wave");return}const o=t!==0?Math.sign(t):0,n=o===0&&i!==0?Math.sign(i):0,a={x:this.state.position.x+o,y:this.state.position.y+n};this.state.position=a,this.updatePosition(),setTimeout(()=>{this.state.position.x!==e.x||this.state.position.y!==e.y?this.animateWalkTo(e):(this.state.targetPosition=null,this.react("wave"))},200)}setGridSize(e){this.gridSize=e,this.updatePosition()}updatePosition(){const e=100/this.gridSize,t=this.state.position.x*e+e/2,i=this.state.position.y*e+e/2;this.element.style.left=`${t}%`,this.element.style.top=`${i}%`,this.element.style.transform="translate(-50%, -50%)"}startBehavior(){this.moveInterval=window.setInterval(()=>{this.state.currentAction==="idle"&&this.randomMove()},C.FARMER_MOVE_INTERVAL+Math.random()*2e3),this.actionInterval=window.setInterval(()=>{Math.random()<.3&&this.doRandomAction()},C.FARMER_ACTION_INTERVAL+Math.random()*4e3),this.setAction("idle")}randomMove(){const e=[{x:0,y:-1},{x:0,y:1},{x:-1,y:0},{x:1,y:0}],t=e[Math.floor(Math.random()*e.length)],i=this.state.position.x+t.x,o=this.state.position.y+t.y;i>=0&&i<this.gridSize&&o>=0&&o<this.gridSize&&this.moveTo({x:i,y:o})}moveTo(e){this.setAction("walking"),this.state.targetPosition=e,setTimeout(()=>{this.state.position=e,this.updatePosition(),setTimeout(()=>{this.state.targetPosition=null,this.setAction("idle")},500)},100)}setAction(e){this.state.currentAction=e,this.state.lastActionTime=Date.now(),this.element.className="farmer "+e}doRandomAction(){const e=["looking","waving"],t=e[Math.floor(Math.random()*e.length)];this.setAction(t),setTimeout(()=>{this.setAction("idle")},1500)}react(e){this.setAction("celebrating");const t=document.createElement("div");t.className="farmer-reaction",t.textContent=R.reactions[e]||R.reactions.sparkle,this.element.appendChild(t),setTimeout(()=>{t.remove(),this.setAction("idle")},1e3)}speak(e){const t=R.speechBubbles[e];if(!t||t.length===0)return;const i=t[Math.floor(Math.random()*t.length)],o=this.element.querySelector(".farmer-speech");o&&o.remove();const n=document.createElement("div");n.className="farmer-speech",n.textContent=i,this.element.appendChild(n),setTimeout(()=>n.remove(),2e3)}destroy(){this.moveInterval&&clearInterval(this.moveInterval),this.actionInterval&&clearInterval(this.actionInterval),this.autoWaterInterval&&clearInterval(this.autoWaterInterval)}}const N="cozy_garden_save_v1";class Be{save(e){try{const t=JSON.stringify(e);localStorage.setItem(N,t)}catch(t){console.warn("Failed to save game:",t)}}load(){try{const e=localStorage.getItem(N);if(!e)return null;const t=JSON.parse(e);return this.validateState(t)?t:null}catch(e){return console.warn("Failed to load save:",e),null}}clear(){localStorage.removeItem(N)}validateState(e){return e&&typeof e.water=="number"&&e.farmer&&typeof e.farmer.position=="object"&&(Array.isArray(e.plants)||Array.isArray(e.zones))}}class Re{constructor(){l(this,"audioContext",null);l(this,"enabled",!0);l(this,"hasUserInteracted",!1);const e=()=>{this.hasUserInteracted=!0,this.initAudio()};document.addEventListener("click",e,{once:!0}),document.addEventListener("touchstart",e,{once:!0})}initAudio(){if(!this.audioContext)try{this.audioContext=new(window.AudioContext||window.webkitAudioContext)}catch(e){console.warn("Web Audio not supported")}}play(e){if(this.enabled&&(this.vibrate(e),!!this.audioContext))switch(e){case"plant":this.playTone(200,.1,"sine",.3),setTimeout(()=>this.playTone(300,.1,"sine",.2),50);break;case"water":this.playTone(400,.15,"sine",.2),this.playTone(500,.1,"sine",.15),setTimeout(()=>this.playTone(350,.1,"sine",.1),100);break;case"grow":this.playTone(300,.1,"sine",.2),setTimeout(()=>this.playTone(400,.1,"sine",.2),100),setTimeout(()=>this.playTone(500,.15,"sine",.3),200);break;case"merge":this.playTone(400,.1,"sine",.3),setTimeout(()=>this.playTone(500,.1,"sine",.3),80),setTimeout(()=>this.playTone(600,.15,"sine",.4),160),setTimeout(()=>this.playTone(800,.2,"sine",.3),240);break;case"unlock":this.playTone(400,.1,"sine",.3),setTimeout(()=>this.playTone(500,.1,"sine",.3),100),setTimeout(()=>this.playTone(600,.1,"sine",.3),200),setTimeout(()=>this.playTone(800,.3,"sine",.4),300);break;case"click":this.playTone(600,.05,"sine",.2);break;case"locked":this.playTone(200,.1,"square",.2),setTimeout(()=>this.playTone(150,.15,"square",.2),100);break}}vibrate(e){if(!(!navigator.vibrate||!this.hasUserInteracted))switch(e){case"plant":navigator.vibrate(10);break;case"water":navigator.vibrate([5,30,5]);break;case"grow":navigator.vibrate([10,20,10]);break;case"merge":navigator.vibrate([15,30,15,30,20]);break;case"unlock":navigator.vibrate([20,50,20,50,30,50,40]);break;case"locked":navigator.vibrate([30,50,30]);break}}playTone(e,t,i,o){if(!this.audioContext)return;const n=this.audioContext.createOscillator(),a=this.audioContext.createGain();n.connect(a),a.connect(this.audioContext.destination),n.type=i,n.frequency.value=e,a.gain.setValueAtTime(o,this.audioContext.currentTime),a.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+t),n.start(this.audioContext.currentTime),n.stop(this.audioContext.currentTime+t)}setEnabled(e){this.enabled=e}isEnabled(){return this.enabled}}class je{constructor(){l(this,"effectsLayer");l(this,"messageTimeout",null);this.effectsLayer=document.getElementById("effects")}waterEffect(e){this.spawnParticles(e,["ðŸ’§","ðŸ’¦"],5,"water-drop");const t=this.gridToScreen(e);setTimeout(()=>{const i=document.createElement("div");i.className="water-ripple",i.style.left=`${t.x}px`,i.style.top=`${t.y+20}px`,this.effectsLayer.appendChild(i),setTimeout(()=>i.remove(),800)},400)}plantEffect(e){this.spawnParticles(e,["ðŸŒ±","âœ¨","ðŸŒ¿"],4,"sparkle"),this.floatEmoji(e,"ðŸŒ±")}growthEffect(e){const t=this.gridToScreen(e),i=document.createElement("div");i.className="growth-effect",i.style.left=`${t.x-30}px`,i.style.top=`${t.y-30}px`,this.effectsLayer.appendChild(i),setTimeout(()=>i.remove(),600),this.spawnParticles(e,["âœ¨","â­","ðŸ’«"],6,"sparkle"),this.floatEmoji(e,"âœ¨")}mergeEffect(e){const t=this.gridToScreen(e),i=document.createElement("div");i.className="merge-burst",i.style.left=`${t.x-40}px`,i.style.top=`${t.y-40}px`,this.effectsLayer.appendChild(i),setTimeout(()=>i.remove(),700),this.spawnGoldenSparkles(e,10),this.spawnConfetti(e,8),this.floatEmoji(e,"â­")}unlockEffect(e){const t=this.gridToScreen(e);for(let i=0;i<3;i++)setTimeout(()=>{const o=document.createElement("div");o.className="merge-burst",o.style.left=`${t.x-40+(Math.random()-.5)*60}px`,o.style.top=`${t.y-40+(Math.random()-.5)*60}px`,this.effectsLayer.appendChild(o),setTimeout(()=>o.remove(),700)},i*150);this.spawnConfetti(e,15),this.floatEmoji(e,"ðŸ†")}spawnParticles(e,t,i,o){const n=this.gridToScreen(e);for(let a=0;a<i;a++){const r=document.createElement("div");r.className=o,r.textContent=t[Math.floor(Math.random()*t.length)];const d=(Math.random()-.5)*60,u=(Math.random()-.5)*60;r.style.left=`${n.x+d}px`,r.style.top=`${n.y+u}px`,setTimeout(()=>{this.effectsLayer.appendChild(r),setTimeout(()=>r.remove(),800)},a*50)}}spawnGoldenSparkles(e,t){const i=this.gridToScreen(e);for(let o=0;o<t;o++){const n=document.createElement("div");n.className="sparkle golden",n.textContent=["âœ¨","â­","ðŸŒŸ"][Math.floor(Math.random()*3)];const a=o/t*Math.PI*2,r=30+Math.random()*20;n.style.left=`${i.x+Math.cos(a)*r}px`,n.style.top=`${i.y+Math.sin(a)*r}px`,setTimeout(()=>{this.effectsLayer.appendChild(n),setTimeout(()=>n.remove(),1e3)},o*30)}}spawnConfetti(e,t){const i=this.gridToScreen(e),o=["ðŸŽ‰","ðŸŽŠ","âœ¨","ðŸ’«","â­"];for(let n=0;n<t;n++){const a=document.createElement("div");a.className="confetti",a.textContent=o[Math.floor(Math.random()*o.length)];const r=(Math.random()-.5)*80;a.style.left=`${i.x+r}px`,a.style.top=`${i.y-20}px`,a.style.animationDuration=`${1+Math.random()*.5}s`,setTimeout(()=>{this.effectsLayer.appendChild(a),setTimeout(()=>a.remove(),1500)},n*40)}}floatEmoji(e,t){const i=this.gridToScreen(e),o=document.createElement("div");o.className="float-emoji",o.textContent=t,o.style.left=`${i.x}px`,o.style.top=`${i.y-20}px`,this.effectsLayer.appendChild(o),setTimeout(()=>o.remove(),1500)}gridToScreen(e){const t=document.getElementById("game-grid"),i=t.getBoundingClientRect(),o=parseInt(getComputedStyle(t).getPropertyValue("--grid-size"))||5,n=i.width/o,a=i.height/o;return{x:i.left+e.x*n+n/2,y:i.top+e.y*a+a/2}}showMessage(e,t="info"){const i={info:"rgba(0, 0, 0, 0.85)",success:"rgba(46, 125, 50, 0.9)",warning:"rgba(230, 126, 34, 0.9)"},o=document.createElement("div");o.className="floating-message",o.textContent=e,o.style.cssText=`
      position: fixed;
      top: 40%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: ${i[t]};
      color: white;
      padding: 15px 30px;
      border-radius: 20px;
      font-size: 1.2rem;
      font-weight: 600;
      z-index: 1000;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
      animation: message-pop 2.5s ease-out forwards;
    `;const n=document.createElement("style");n.textContent=`
      @keyframes message-pop {
        0% { opacity: 0; transform: translate(-50%, -50%) scale(0.7); }
        10% { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }
        20% { transform: translate(-50%, -50%) scale(1); }
        70% { opacity: 1; }
        100% { opacity: 0; transform: translate(-50%, -60%) scale(0.95); }
      }
    `,document.head.appendChild(n),document.body.appendChild(o),setTimeout(()=>{o.remove(),n.remove()},2500)}showNotification(e){const t=document.createElement("div");t.className="season-notification",t.textContent=e,t.style.cssText=`
      position: fixed;
      top: 80px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 12px 24px;
      border-radius: 25px;
      font-size: 1rem;
      z-index: 2000;
      pointer-events: none;
      animation: notification-slide 3s ease forwards;
    `;const i=document.createElement("style");i.textContent=`
      @keyframes notification-slide {
        0% { opacity: 0; transform: translateX(-50%) translateY(-20px); }
        15% { opacity: 1; transform: translateX(-50%) translateY(0); }
        85% { opacity: 1; }
        100% { opacity: 0; transform: translateX(-50%) translateY(-10px); }
      }
    `,document.head.appendChild(i),document.body.appendChild(t),setTimeout(()=>{t.remove(),i.remove()},3e3)}}const Ne={butterfly:{type:"butterfly",emoji:"ðŸ¦‹",name:"Butterfly",ability:"Pollinates nearby plants",effect:"pollinate"},bee:{type:"bee",emoji:"ðŸ",name:"Busy Bee",ability:"Bonus water regeneration",effect:"bonus_water"},rabbit:{type:"rabbit",emoji:"ðŸ°",name:"Lucky Rabbit",ability:"Instantly grows 1 plant",effect:"instant_grow"},bluebird:{type:"bluebird",emoji:"ðŸ¦",name:"Bluebird",ability:"Next harvest worth 2x",effect:"double_harvest"},ladybug:{type:"ladybug",emoji:"ðŸž",name:"Ladybug",ability:"Pollinates nearby plants",effect:"pollinate"}};class Oe{constructor(e,t,i,o){l(this,"config");l(this,"element");l(this,"gridSize");l(this,"position");l(this,"targetPosition",null);l(this,"onEffect");l(this,"isActive",!1);l(this,"visitTimeout",null);l(this,"moveInterval",null);this.config=Ne[e],this.gridSize=i,this.onEffect=o,this.position=this.getRandomEdgePosition(),this.element=document.createElement("div"),this.element.className="visitor entering",this.element.textContent=this.config.emoji,this.element.setAttribute("data-type",e),t.appendChild(this.element),this.updateVisualPosition()}getConfig(){return this.config}getPosition(){return x({},this.position)}getRandomEdgePosition(){switch(Math.floor(Math.random()*4)){case 0:return{x:Math.floor(Math.random()*this.gridSize),y:-1};case 1:return{x:this.gridSize,y:Math.floor(Math.random()*this.gridSize)};case 2:return{x:Math.floor(Math.random()*this.gridSize),y:this.gridSize};default:return{x:-1,y:Math.floor(Math.random()*this.gridSize)}}}enter(e){this.isActive=!0,this.targetPosition=e||{x:Math.floor(Math.random()*this.gridSize),y:Math.floor(Math.random()*this.gridSize)},this.moveToTarget(()=>{this.element.classList.remove("entering"),this.element.classList.add("active"),this.onEffect(this.config.effect,this),this.startWandering();const t=v.VISIT_DURATION_MIN+Math.random()*(v.VISIT_DURATION_MAX-v.VISIT_DURATION_MIN);this.visitTimeout=window.setTimeout(()=>this.leave(),t)})}moveToTarget(e){if(!this.targetPosition){e();return}const t=()=>{const i=this.targetPosition.x-this.position.x,o=this.targetPosition.y-this.position.y;if(Math.abs(i)<.5&&Math.abs(o)<.5){this.position=x({},this.targetPosition),this.updateVisualPosition(),e();return}this.position.x+=Math.sign(i)*.5,this.position.y+=Math.sign(o)*.5,this.updateVisualPosition(),requestAnimationFrame(t)};t()}startWandering(){this.moveInterval=window.setInterval(()=>{const e=Math.random()>.5?Math.random()>.5?1:-1:0,t=e===0?Math.random()>.5?1:-1:0,i=Math.max(0,Math.min(this.gridSize-1,this.position.x+e)),o=Math.max(0,Math.min(this.gridSize-1,this.position.y+t));this.position={x:i,y:o},this.updateVisualPosition()},2e3)}leave(){if(!this.isActive)return;this.isActive=!1,this.moveInterval&&(clearInterval(this.moveInterval),this.moveInterval=null),this.visitTimeout&&(clearTimeout(this.visitTimeout),this.visitTimeout=null),this.element.classList.remove("active"),this.element.classList.add("leaving");const e=this.getRandomEdgePosition();this.targetPosition=e,this.moveToTarget(()=>{this.element.remove()})}updateVisualPosition(){const e=100/this.gridSize,t=this.position.x*e+e/2,i=this.position.y*e+e/2;this.element.style.left=`${t}%`,this.element.style.top=`${i}%`}destroy(){this.leave()}}const A={legendary_soulmate:["A legendary heart who loved deeply.","Forever remembered for their bonds.","Their love echoes through the garden."],legendary:["A wise elder who guided many.","Their wisdom lives on in new growth.","A legend in their own time."],ancient_soulmate:["An ancient soul with a warm heart.","Their friendships shaped the garden."],ancient:["Watched over many generations.","A pillar of the garden community."],wishmaker:["Made dreams come true.","A giver of wishes."],golden:["Touched by golden light.","Radiant until the end."],default:["A beloved garden friend.","Gone but not forgotten.","Part of the garden forever."]};function We(s){let e;return s.elderTier==="legendary"&&s.strongestBondLevel==="soulmate"?e=A.legendary_soulmate:s.elderTier==="legendary"?e=A.legendary:s.elderTier==="ancient"&&s.strongestBondLevel==="soulmate"?e=A.ancient_soulmate:s.elderTier==="ancient"?e=A.ancient:s.wishesGranted>=3?e=A.wishmaker:s.wasGolden?e=A.golden:e=A.default,e[Math.floor(Math.random()*e.length)]}function De(s){const e=Math.floor(s/6e4),t=Math.floor(e/60);if(t>=1){const i=e%60;return i>0?`${t}h ${i}m`:`${t}h`}return`${e}m`}function Ge(s,e,t,i=0){var n;const o={id:s.id,name:s.name||"Unknown",personalityId:s.personality||"cheerful",evolutionId:s.evolutionId,seedId:s.seedId,elderTier:e,retiredAt:Date.now(),timeAlive:Date.now()-s.lastUpdateTime,totalBonds:((n=s.neighborBonds)==null?void 0:n.length)||0,strongestBondLevel:t,wishesGranted:i,wasGolden:s.isGolden||!1};return o.epitaph=We(o),o}class $e{constructor(){l(this,"container",null);l(this,"isOpen",!1);l(this,"retiredPlants",[]);this.createUI()}createUI(){this.container=document.createElement("div"),this.container.className="hall-of-fame-overlay",this.container.innerHTML=`
      <div class="hall-of-fame-modal">
        <div class="hof-header">
          <h2>ðŸ›ï¸ Hall of Fame</h2>
          <p class="hof-subtitle">Honoring our legendary elders</p>
          <button class="hof-close" aria-label="Close">âœ•</button>
        </div>
        <div class="hof-content">
          <div class="hof-empty">
            <span class="hof-empty-icon">ðŸŒ±</span>
            <p>No plants have been retired yet.</p>
            <p class="hof-hint">Retire legendary elders to honor them here!</p>
          </div>
          <div class="hof-plants"></div>
        </div>
        <div class="hof-footer">
          <span class="hof-count">0 / ${w.MAX_HALL_OF_FAME} legends</span>
        </div>
      </div>
    `,this.container.style.display="none",document.body.appendChild(this.container);const e=this.container.querySelector(".hof-close");e==null||e.addEventListener("click",()=>this.close()),this.container.addEventListener("click",t=>{t.target===this.container&&this.close()})}setPlants(e){this.retiredPlants=e,this.render()}addPlant(e){this.retiredPlants.unshift(e),this.retiredPlants.length>w.MAX_HALL_OF_FAME&&(this.retiredPlants=this.retiredPlants.slice(0,w.MAX_HALL_OF_FAME)),this.render()}getPlants(){return this.retiredPlants}render(){if(!this.container)return;const e=this.container.querySelector(".hof-plants"),t=this.container.querySelector(".hof-empty"),i=this.container.querySelector(".hof-count");if(!(!e||!t||!i)){if(i.textContent=`${this.retiredPlants.length} / ${w.MAX_HALL_OF_FAME} legends`,this.retiredPlants.length===0){t.style.display="flex",e.innerHTML="";return}t.style.display="none",e.innerHTML=this.retiredPlants.map(o=>{const n=W(o.evolutionId),a=o.elderTier==="legendary"?"legendary":o.elderTier==="ancient"?"ancient":"elder",r=o.elderTier==="legendary"?"ðŸ‘‘":o.elderTier==="ancient"?"âœ¨":"ðŸŒŸ",d=o.strongestBondLevel==="soulmate"?"ðŸ’•":o.strongestBondLevel==="bestFriend"?"ðŸ’—":o.strongestBondLevel==="friend"?"ðŸ’›":"";return`
        <div class="hof-plant ${a} ${o.wasGolden?"golden":""}">
          <div class="hof-plant-emoji">${n}</div>
          <div class="hof-plant-info">
            <div class="hof-plant-name">
              ${r} ${o.name} ${d}
            </div>
            <div class="hof-plant-epitaph">"${o.epitaph}"</div>
            <div class="hof-plant-stats">
              <span title="Time in garden">â±ï¸ ${De(o.timeAlive)}</span>
              ${o.totalBonds>0?`<span title="Bonds formed">ðŸ¤ ${o.totalBonds}</span>`:""}
              ${o.wishesGranted>0?`<span title="Wishes granted">ðŸ’« ${o.wishesGranted}</span>`:""}
            </div>
          </div>
        </div>
      `}).join("")}}open(){this.container&&(this.isOpen=!0,this.container.style.display="flex",this.render())}close(){this.container&&(this.isOpen=!1,this.container.style.display="none")}toggle(){this.isOpen?this.close():this.open()}}const M={spring:{emoji:"ðŸŒ¸",name:"Spring",growthModifier:1.25,waterDecayModifier:1,harvestBonus:1,possibleWeather:["clear","rain","sunny"],bgGradient:"linear-gradient(180deg, #87CEEB 0%, #98FB98 100%)",particleEmoji:["ðŸŒ¸","ðŸŒ·","ðŸŒ±","ðŸ¦‹"]},summer:{emoji:"â˜€ï¸",name:"Summer",growthModifier:1.5,waterDecayModifier:1.5,harvestBonus:1,possibleWeather:["clear","sunny","sunny","clear"],bgGradient:"linear-gradient(180deg, #FFD700 0%, #87CEEB 30%, #228B22 100%)",particleEmoji:["â˜€ï¸","ðŸŒ»","ðŸ¦‹","ðŸ"]},autumn:{emoji:"ðŸ‚",name:"Autumn",growthModifier:.85,waterDecayModifier:.75,harvestBonus:1.5,possibleWeather:["clear","windy","rain","clear"],bgGradient:"linear-gradient(180deg, #DEB887 0%, #D2691E 50%, #8B4513 100%)",particleEmoji:["ðŸ‚","ðŸ","ðŸŒ°","ðŸ„"]},winter:{emoji:"â„ï¸",name:"Winter",growthModifier:.5,waterDecayModifier:.25,harvestBonus:1,possibleWeather:["clear","snow","snow","clear"],bgGradient:"linear-gradient(180deg, #B0C4DE 0%, #E0FFFF 50%, #F0F8FF 100%)",particleEmoji:["â„ï¸","ðŸŒ¨ï¸","â›„","âœ¨"]}},U={clear:{emoji:"ðŸŒ¤ï¸",description:"Clear skies"},rain:{emoji:"ðŸŒ§ï¸",description:"Rain - plants get watered!"},sunny:{emoji:"â˜€ï¸",description:"Sunny - growth boost!"},snow:{emoji:"ðŸŒ¨ï¸",description:"Snow - plants rest"},windy:{emoji:"ðŸ’¨",description:"Windy - seeds spread!"}};class He{constructor(){l(this,"currentSeason","spring");l(this,"currentWeather","clear");l(this,"seasonStartTime",Date.now());l(this,"weatherStartTime",Date.now());l(this,"lastParticleTime",0);l(this,"particles",[]);l(this,"container",null);l(this,"onSeasonChange");l(this,"onWeatherChange");this.calculateCurrentSeason()}init(e){this.container=e,this.applySeasonVisuals(),this.startParticleLoop()}setCallbacks(e,t){this.onSeasonChange=e,this.onWeatherChange=t}calculateCurrentSeason(){var r;const e=Date.now(),t=F.CYCLE_DURATION,i=e%t/t,o=Math.floor(i*4),a=["spring","summer","autumn","winter"][o];a!==this.currentSeason&&(this.currentSeason=a,this.seasonStartTime=e,this.pickNewWeather(),(r=this.onSeasonChange)==null||r.call(this,a))}pickNewWeather(){var o;const t=M[this.currentSeason].possibleWeather,i=t[Math.floor(Math.random()*t.length)];i!==this.currentWeather&&(this.currentWeather=i,this.weatherStartTime=Date.now(),(o=this.onWeatherChange)==null||o.call(this,i))}update(){this.calculateCurrentSeason();const e=F.WEATHER_DURATION;Date.now()-this.weatherStartTime>e&&(this.pickNewWeather(),this.weatherStartTime=Date.now()),this.updateParticles()}getCurrentSeason(){return this.currentSeason}getCurrentWeather(){return this.currentWeather}getSeasonConfig(){return M[this.currentSeason]}getWeatherEffect(){return U[this.currentWeather]}getGrowthModifier(){let e=M[this.currentSeason].growthModifier;return this.currentWeather==="sunny"?e*=1.25:this.currentWeather==="snow"&&(e*=.5),e}getWaterDecayModifier(){let e=M[this.currentSeason].waterDecayModifier;return this.currentWeather==="rain"&&(e*=.5),e}getHarvestBonus(){return M[this.currentSeason].harvestBonus}shouldAutoWater(){return this.currentWeather==="rain"}getSeasonEmoji(){return M[this.currentSeason].emoji}getWeatherEmoji(){return U[this.currentWeather].emoji}getSeasonProgress(){const t=F.CYCLE_DURATION/4,i=Date.now()-this.seasonStartTime;return Math.min(i/t,1)}getData(){return{season:this.currentSeason,weather:this.currentWeather,dayInSeason:Math.floor(this.getSeasonProgress()*30)+1,seasonProgress:this.getSeasonProgress()}}applySeasonVisuals(){if(!this.container)return;const e=M[this.currentSeason],t=document.getElementById("game");t&&(t.style.background=e.bgGradient,t.style.transition="background 2s ease"),document.body.className=`season-${this.currentSeason} weather-${this.currentWeather}`}startParticleLoop(){setInterval(()=>this.spawnParticle(),F.PARTICLE_INTERVAL)}spawnParticle(){if(!this.container||this.particles.length>F.MAX_PARTICLES)return;const e=M[this.currentSeason],t=e.particleEmoji[Math.floor(Math.random()*e.particleEmoji.length)],i=document.createElement("div");i.className="season-particle",i.textContent=t,i.style.cssText=`
      position: fixed;
      left: ${Math.random()*100}vw;
      top: -30px;
      font-size: ${16+Math.random()*16}px;
      pointer-events: none;
      z-index: 1000;
      opacity: 0.8;
      animation: particle-fall ${5+Math.random()*5}s linear forwards;
    `,this.currentSeason!=="winter"&&(i.style.animation+=`, particle-sway ${2+Math.random()*2}s ease-in-out infinite`),document.body.appendChild(i),this.particles.push(i),setTimeout(()=>{i.remove(),this.particles=this.particles.filter(o=>o!==i)},1e4)}updateParticles(){}transitionTo(e){var t;e!==this.currentSeason&&(this.currentSeason=e,this.seasonStartTime=Date.now(),this.pickNewWeather(),this.applySeasonVisuals(),(t=this.onSeasonChange)==null||t.call(this,e))}destroy(){this.particles.forEach(e=>e.remove()),this.particles=[]}}class ze{constructor(){l(this,"state");l(this,"garden");l(this,"farmer");l(this,"saveManager");l(this,"soundManager");l(this,"effects");l(this,"hallOfFame");l(this,"seasonManager");l(this,"gridElement");l(this,"waterCountElement");l(this,"pointsCountElement");l(this,"discoveryCountElement");l(this,"seasonDisplayElement",null);l(this,"growthInterval",null);l(this,"waterRegenInterval",null);l(this,"ambientInterval",null);l(this,"visitorSpawnTimeout",null);l(this,"currentVisitor",null);l(this,"doubleHarvestActive",!1);this.gridElement=document.getElementById("game-grid"),this.waterCountElement=document.getElementById("water-count"),this.pointsCountElement=document.getElementById("points-count"),this.discoveryCountElement=document.getElementById("discovery-count"),this.saveManager=new Be,this.soundManager=new Re,this.effects=new je,this.seasonManager=new He;const e=this.saveManager.load();e?(this.state=this.migrateState(e),this.checkOfflineProgress()):this.state=this.createInitialState(),this.garden=new Le(this.state.plants,this.gridElement,i=>this.handleGameEvent(i),()=>this.state.water>0,()=>this.state.selectedSeedId,()=>({totalMerges:this.state.totalMerges}));const t=Math.floor(P.gridSize/2);this.state.farmer||(this.state.farmer={position:{x:t,y:t},targetPosition:null,currentAction:"idle",lastActionTime:Date.now()}),this.farmer=new Ve(this.state.farmer,this.gridElement,P.gridSize),this.farmer.setOnTapped(()=>this.handleFarmerTapped()),this.farmer.setOnAutoWater(()=>this.handleFarmerAutoWater()),this.hallOfFame=new $e,this.hallOfFame.setPlants(this.state.retiredPlants||[]),this.garden.setRetireCallback(i=>this.retirePlantToHallOfFame(i)),this.setupSeedPicker(),this.setupShop(),this.setupDiscoveryModal(),this.setupHallOfFameButton(),this.setupSeasonDisplay(),this.updateUI(),this.seasonManager.init(this.gridElement),this.seasonManager.setCallbacks(i=>this.onSeasonChange(i),i=>this.onWeatherChange(i)),this.garden.render(),this.startGrowthLoop(),this.startWaterRegenLoop(),this.startAmbientLoop(),this.scheduleNextVisitor(),this.updateAmbient()}createInitialState(){const e=Math.floor(P.gridSize/2);return{plants:[],farmer:{position:{x:e,y:e},targetPosition:null,currentAction:"idle",lastActionTime:Date.now()},water:I.WATER_MAX,lastWaterRegen:Date.now(),gardenPoints:0,totalPlantsMaxed:0,totalMerges:0,unlockedSeeds:["sprout"],discoveredEvolutions:[],selectedSeedId:"sprout",harvestCounts:{},spotHarvestCounts:{},lastSaveTime:Date.now(),lastPlayTime:Date.now(),retiredPlants:[]}}migrateState(e){if(e.plants!==void 0&&e.unlockedSeeds!==void 0)return e;console.log("Migrating save from old zone format...");const t=Math.floor(P.gridSize/2),i={plants:[],farmer:e.farmer||{position:{x:t,y:t},targetPosition:null,currentAction:"idle",lastActionTime:Date.now()},water:e.water||I.WATER_MAX,lastWaterRegen:e.lastWaterRegen||Date.now(),gardenPoints:e.gardenPoints||0,totalPlantsMaxed:e.totalPlantsMaxed||0,totalMerges:e.totalMerges||0,unlockedSeeds:["sprout"],discoveredEvolutions:[],selectedSeedId:"sprout",harvestCounts:{},spotHarvestCounts:{},lastSaveTime:e.lastSaveTime||Date.now(),lastPlayTime:e.lastPlayTime||Date.now(),retiredPlants:[]};if(e.zones&&Array.isArray(e.zones)){for(const o of e.zones)if(o.plants&&Array.isArray(o.plants))for(const n of o.plants){const a={id:n.id||`plant_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,seedId:"sprout",evolutionId:"sprout_seedling",position:n.position||{x:0,y:0},isWatered:n.isWatered||!1,waterCount:0,growthProgress:n.growthProgress||0,lastUpdateTime:n.lastUpdateTime||Date.now(),isGolden:n.isGolden||!1,growthBoost:n.growthBoost||1,evoData:K()};a.position.x<P.gridSize&&a.position.y<P.gridSize&&i.plants.push(a)}}return i}setupSeedPicker(){const e=document.getElementById("seed-picker");if(e){e.innerHTML="";for(const t of O){const i=document.createElement("button");i.className="seed-btn",i.dataset.seed=t.id,i.textContent=t.emoji,i.title=t.name,this.state.unlockedSeeds.includes(t.id)||(i.classList.add("locked"),i.textContent="ðŸ”’"),t.id===this.state.selectedSeedId&&i.classList.add("selected"),i.addEventListener("click",()=>{this.state.unlockedSeeds.includes(t.id)&&this.selectSeed(t.id)}),e.appendChild(i)}}}selectSeed(e){this.state.selectedSeedId=e,document.querySelectorAll(".seed-btn").forEach(t=>{t.classList.toggle("selected",t.dataset.seed===e)}),this.soundManager.play("click"),this.save()}setupShop(){const e=document.getElementById("shop-btn"),t=document.getElementById("seed-shop"),i=document.getElementById("shop-close");!e||!t||(e.addEventListener("click",()=>{this.renderShop(),t.classList.remove("hidden"),this.soundManager.play("click")}),i==null||i.addEventListener("click",()=>{t.classList.add("hidden"),this.soundManager.play("click")}),t.addEventListener("click",o=>{o.target===t&&t.classList.add("hidden")}))}renderShop(){const e=document.getElementById("seed-list");if(e){e.innerHTML="";for(const t of O){const i=this.state.unlockedSeeds.includes(t.id),o=H(t.id),n=this.state.gardenPoints>=o,a=document.createElement("div");a.className=`seed-item${i?" unlocked":""}`,a.innerHTML=`
        <span class="seed-emoji">${t.emoji}</span>
        <div class="seed-info">
          <div class="seed-name">${t.name}</div>
          <div class="seed-desc">${t.description}</div>
        </div>
        <div class="seed-price">
          ${i?"âœ“ Owned":`${o} ðŸŒŸ`}
        </div>
      `,i||(a.classList.toggle("can-afford",n),a.addEventListener("click",()=>{n&&this.unlockSeed(t.id)})),e.appendChild(a)}}}unlockSeed(e){const t=H(e);if(this.state.gardenPoints<t)return;this.state.gardenPoints-=t,this.state.unlockedSeeds.push(e),X(e)&&this.soundManager.play("unlock"),this.setupSeedPicker(),this.renderShop(),this.updateUI(),this.save(),this.handleGameEvent({type:"seed_unlocked",seedId:e})}setupDiscoveryModal(){const e=document.getElementById("discovery-display"),t=document.getElementById("discovery-modal"),i=t==null?void 0:t.querySelector(".close-modal"),o=t==null?void 0:t.querySelectorAll(".discovery-tab");!e||!t||(e.addEventListener("click",()=>{this.renderDiscoveryGrid("all"),t.classList.remove("hidden"),this.soundManager.play("click")}),i==null||i.addEventListener("click",()=>{t.classList.add("hidden"),this.soundManager.play("click")}),o==null||o.forEach(n=>{n.addEventListener("click",()=>{const a=n.dataset.filter||"all";o.forEach(r=>r.classList.remove("active")),n.classList.add("active"),this.renderDiscoveryGrid(a)})}),t.addEventListener("click",n=>{n.target===t&&t.classList.add("hidden")}))}setupHallOfFameButton(){var i;const e=document.getElementById("discovery-btn");if(!(e!=null&&e.parentElement))return;const t=document.createElement("div");t.id="hall-of-fame-btn",t.className="hall-of-fame-display",t.innerHTML=`
      <span class="hof-icon">ðŸ›ï¸</span>
      <span id="hof-count">${((i=this.state.retiredPlants)==null?void 0:i.length)||0}</span>
    `,t.title="Hall of Fame",t.addEventListener("click",()=>{this.hallOfFame.toggle(),this.soundManager.play("click")}),e.parentElement.insertBefore(t,e.nextSibling)}retirePlantToHallOfFame(e){const t=this.garden.getPlantElderTier(e),i=this.garden.getStrongestBond(e),o=this.garden.getWishesGrantedCount(e),n=Ge(e,t,i,o);this.hallOfFame.addPlant(n),this.state.retiredPlants||(this.state.retiredPlants=[]),this.state.retiredPlants=this.hallOfFame.getPlants();const a=document.getElementById("hof-count");a&&(a.textContent=this.state.retiredPlants.length.toString()),this.soundManager.play("grow"),this.farmer.speak("evolve")}setupSeasonDisplay(){const e=document.getElementById("discovery-btn");e!=null&&e.parentElement&&(this.seasonDisplayElement=document.createElement("div"),this.seasonDisplayElement.className="season-display",this.updateSeasonDisplay(),this.seasonDisplayElement.addEventListener("click",()=>{this.showSeasonInfo(),this.soundManager.play("click")}),e.parentElement.insertBefore(this.seasonDisplayElement,e))}updateSeasonDisplay(){if(!this.seasonDisplayElement)return;this.seasonManager.getCurrentSeason(),this.seasonManager.getCurrentWeather();const e=this.seasonManager.getSeasonConfig(),t=this.seasonManager.getWeatherEffect();this.seasonDisplayElement.innerHTML=`
      <span class="season-emoji">${e.emoji}</span>
      <span class="weather-emoji">${t.emoji}</span>
      <div class="season-tooltip">
        <div class="season-tooltip-content">
          <div class="season-tooltip-title">${e.name}</div>
          <div class="season-tooltip-effect ${e.growthModifier>1?"positive":e.growthModifier<1?"negative":""}">
            Growth: ${e.growthModifier>1?"+":""}${Math.round((e.growthModifier-1)*100)}%
          </div>
          <div class="season-tooltip-effect">${t.description}</div>
        </div>
      </div>
    `}onSeasonChange(e){console.log(`ðŸŒ¸ Season changed to ${e}`),this.updateSeasonDisplay(),document.body.classList.add("season-transition"),setTimeout(()=>document.body.classList.remove("season-transition"),2e3);const i={spring:["Spring is here! ðŸŒ¸","New beginnings~","Blooming time!"],summer:["Summer sun! â˜€ï¸","So warm~","Growth season!"],autumn:["Autumn leaves! ðŸ‚","Harvest time!","Cozy season~"],winter:["Winter snow! â„ï¸","Rest time~","So peaceful..."]}[e];i[Math.floor(Math.random()*i.length)],this.farmer.speak("idle"),this.effects.showNotification(`${this.seasonManager.getSeasonEmoji()} ${this.seasonManager.getSeasonConfig().name} has arrived!`)}onWeatherChange(e){console.log(`ðŸŒ¤ï¸ Weather changed to ${e}`),this.updateSeasonDisplay(),document.body.className=document.body.className.replace(/weather-\w+/g,"").trim()+` weather-${e}`,e==="rain"&&this.applyRainEffect()}applyRainEffect(){let e=0;for(const t of this.state.plants)!t.isWatered&&Math.random()<F.RAIN_AUTO_WATER_CHANCE&&(this.garden.waterPlantAt(t.position.x,t.position.y,!0),e++);e>0&&this.effects.showNotification("ðŸŒ§ï¸ Rain is watering your plants!")}showSeasonInfo(){const e=this.seasonManager.getData(),t=this.seasonManager.getSeasonConfig();alert(`${t.emoji} ${t.name}

Day ${e.dayInSeason}/30
Growth: ${Math.round(t.growthModifier*100)}%
Harvest bonus: ${Math.round(t.harvestBonus*100)}%
Weather: ${this.seasonManager.getWeatherEffect().description}`)}renderDiscoveryGrid(e){const t=document.getElementById("discovery-grid");if(!t)return;t.innerHTML="";const i=Object.values(Q);let o=i;e!=="all"&&(o=i.filter(n=>n.seedId===e));for(const n of o){const a=this.state.discoveredEvolutions.includes(n.id),r=document.createElement("div");if(r.className=`discovery-item${a?"":" undiscovered"}`,r.dataset.rarity=n.rarity,a){const d=p(n.id);r.innerHTML=`
          <div class="discovery-emoji">${(d==null?void 0:d.emoji)||"â“"}</div>
          <div class="discovery-name">${(d==null?void 0:d.name)||"Unknown"}</div>
        `}else r.innerHTML=`
          <div class="discovery-emoji">â“</div>
          <div class="discovery-name">???</div>
        `;t.appendChild(r)}}handleGameEvent(e){switch(e.type){case"plant_placed":this.soundManager.play("plant"),this.effects.plantEffect(e.plant.position),this.farmer.react("wave"),Math.random()<.3&&this.farmer.speak("plant");break;case"plant_watered":e.isFreeWater||(this.state.water--,this.updateUI()),this.soundManager.play("water"),this.effects.waterEffect(e.plant.position),this.farmer.react("celebrate"),Math.random()<.2&&this.farmer.speak("water"),this.garden.checkWishFulfillment({justWatered:!0,isNight:this.isNightTime()});break;case"plant_evolved":this.soundManager.play("grow"),this.effects.growthEffect(e.plant.position),e.isSpecial?this.farmer.speak("evolve"):this.farmer.speak("grow"),y(e.toEvolution)&&(this.state.totalPlantsMaxed++,Z(e.toEvolution)&&this.farmer.speak("legendary"));break;case"evolution_discovered":this.state.discoveredEvolutions.includes(e.evolutionId)||(this.state.discoveredEvolutions.push(e.evolutionId),this.updateUI(),this.farmer.speak("discovery"));break;case"plants_merged":this.state.totalMerges++,this.soundManager.play("merge"),this.effects.mergeEffect(e.result.position),this.farmer.react("celebrate");break;case"plant_harvested":let t=e.points;this.doubleHarvestActive&&(t*=2,this.doubleHarvestActive=!1),this.state.gardenPoints+=t;const i=e.evolutionId;this.state.harvestCounts[i]=(this.state.harvestCounts[i]||0)+1;const o=`${e.plant.position.x},${e.plant.position.y}`;this.state.spotHarvestCounts[o]=(this.state.spotHarvestCounts[o]||0)+1;const n=Math.min(S.HARVEST_WATER_RETURN,I.WATER_MAX-this.state.water);this.state.water+=n,this.soundManager.play("unlock"),this.effects.mergeEffect(e.plant.position),this.farmer.react("celebrate"),this.farmer.speak(e.wasGolden?"golden":"harvest"),this.updateUI();break;case"combo_watered":this.farmer.speak("combo");break;case"seed_unlocked":break;case"visitor_touched_plant":this.garden.checkWishFulfillment({visitorJustTouched:e.visitorType,isNight:this.isNightTime()});break;case"water_changed":break;case"bond_formed":e.level==="soulmate"&&(this.farmer.speak("evolve"),this.soundManager.play("grow"));break;case"wish_appeared":break;case"wish_fulfilled":this.farmer.react("celebrate"),this.state.gardenPoints+=5,this.updateUI();break;case"elder_reached":e.tier==="legendary"?(this.farmer.speak("evolve"),this.soundManager.play("grow")):e.tier==="ancient"&&this.soundManager.play("grow");break;case"plant_grieving":Math.random()<.3&&this.farmer.react("wave");break}this.save()}startGrowthLoop(){this.growthInterval=window.setInterval(()=>{this.seasonManager.update();const e=this.seasonManager.getGrowthModifier(),t=this.farmer.getPosition();this.garden.updateGrowth(e,t),this.garden.updateNeighborBonds(),this.garden.updateWishes(),this.garden.updateElderStatus()},C.GROWTH_TICK)}startWaterRegenLoop(){this.waterRegenInterval=window.setInterval(()=>{if(this.state.water<I.WATER_MAX){const e=Date.now(),t=e-this.state.lastWaterRegen;t>=C.WATER_REGEN_TIME&&(this.state.water=Math.min(this.state.water+Math.floor(t/C.WATER_REGEN_TIME),I.WATER_MAX),this.state.lastWaterRegen=e,this.updateUI(),this.save())}},1e3)}startAmbientLoop(){this.ambientInterval=window.setInterval(()=>{this.updateAmbient()},6e4)}updateAmbient(){const e=new Date().getHours(),t=document.documentElement;let i,o;e>=6&&e<19?(i=1,o="rgba(255, 250, 240, 0.05)"):e>=19&&e<20?(i=.95,o="rgba(255, 180, 100, 0.1)"):e>=20||e<5?(i=.85,o="rgba(100, 120, 180, 0.15)"):(i=.92,o="rgba(255, 200, 150, 0.08)"),t.style.setProperty("--ambient-brightness",i.toString()),t.style.setProperty("--ambient-overlay",o)}isNightTime(){const e=new Date().getHours();return e>=20||e<5}checkOfflineProgress(){const e=Date.now(),t=e-this.state.lastPlayTime;if(t<6e4){this.state.lastPlayTime=e;return}const i=Math.min(t,C.MAX_OFFLINE_MS),o={timeAway:i,plantsGrown:[],waterRegened:0},n=Math.floor(i/C.WATER_REGEN_TIME);o.waterRegened=Math.min(n,I.WATER_MAX-this.state.water),this.state.water=Math.min(this.state.water+n,I.WATER_MAX),this.state.lastPlayTime=e,o.waterRegened>0&&this.showWelcomeBack(o)}showWelcomeBack(e){const t=document.getElementById("welcome-back"),i=document.getElementById("time-away"),o=document.getElementById("growth-summary"),n=document.getElementById("welcome-continue"),a=Math.floor(e.timeAway/(1e3*60*60)),r=Math.floor(e.timeAway%(1e3*60*60)/(1e3*60));a>0?i.textContent=`${a}h ${r}m`:i.textContent=`${r} minutes`;let d="";e.waterRegened>0&&(d+=`<div class="growth-item">ðŸ’§ +${e.waterRegened} water</div>`),e.plantsGrown.length>0&&(d+=`<div class="growth-item">ðŸŒ± ${e.plantsGrown.length} plants evolved!</div>`),d===""&&(d='<div class="growth-item">Your garden is waiting! ðŸŒ»</div>'),o.innerHTML=d,t.classList.remove("hidden"),n.onclick=()=>{t.classList.add("hidden"),this.soundManager.play("click")}}handleFarmerTapped(){const e=this.farmer.getPosition(),t=[{x:e.x,y:e.y},{x:e.x-1,y:e.y},{x:e.x+1,y:e.y},{x:e.x,y:e.y-1},{x:e.x,y:e.y+1}];let i=0;for(const o of t){const n=this.garden.getPlantAt(o.x,o.y);n&&!n.isWatered&&this.state.water>0&&(this.garden.waterPlantAt(o.x,o.y,!0),this.state.water--,i++)}i>0?(this.farmer.react("celebrate"),this.updateUI(),this.save()):this.farmer.react("wave")}handleFarmerAutoWater(){const e=this.farmer.getPosition(),t=[{x:e.x,y:e.y},{x:e.x-1,y:e.y},{x:e.x+1,y:e.y},{x:e.x,y:e.y-1},{x:e.x,y:e.y+1}];for(const i of t){const o=this.garden.getPlantAt(i.x,i.y);if(o&&!o.isWatered){this.garden.waterPlantAt(i.x,i.y,!0),this.save();return}}}updateUI(){this.waterCountElement.textContent=this.state.water.toString(),this.pointsCountElement.textContent=this.state.gardenPoints.toString();const e=ee,t=this.state.discoveredEvolutions.length;this.discoveryCountElement.textContent=`${t}/${e}`}save(){this.state.lastSaveTime=Date.now(),this.saveManager.save(this.state)}scheduleNextVisitor(){this.visitorSpawnTimeout&&clearTimeout(this.visitorSpawnTimeout);const e=this.state.plants.filter(o=>y(o.evolutionId)).length;let t=v.SPAWN_INTERVAL_MIN+Math.random()*(v.SPAWN_INTERVAL_MAX-v.SPAWN_INTERVAL_MIN);const i=Math.min(.5,e*v.MAX_PLANT_BONUS);t*=1-i,this.visitorSpawnTimeout=window.setTimeout(()=>this.spawnVisitor(),t)}spawnVisitor(){if(this.currentVisitor){this.scheduleNextVisitor();return}const e=this.seasonManager.getCurrentSeason();let t;switch(e){case"spring":t=v.SPRING_VISITORS;break;case"summer":t=v.SUMMER_VISITORS;break;case"autumn":t=v.AUTUMN_VISITORS;break;case"winter":t=v.WINTER_VISITORS;break}const i={"ðŸ¦‹":"butterfly","ðŸ":"bee","ðŸ¦":"bluebird","ðŸž":"ladybug","ðŸ¿ï¸":"rabbit","ðŸ¦”":"rabbit","ðŸ„":"butterfly","â„ï¸":"butterfly","â›„":"rabbit"},o=t[Math.floor(Math.random()*t.length)],n=i[o]||"butterfly";this.soundManager.play("unlock"),this.currentVisitor=new Oe(n,this.gridElement,P.gridSize,(r,d)=>this.handleVisitorEffect(r,d)),this.currentVisitor.enter();const a=v.VISIT_DURATION_MAX+1e3;setTimeout(()=>{this.currentVisitor=null,this.scheduleNextVisitor()},a)}handleVisitorEffect(e,t){const i=t.getPosition();switch(e){case"pollinate":for(const n of this.state.plants){const a=Math.abs(n.position.x-i.x),r=Math.abs(n.position.y-i.y);a<=1&&r<=1&&(n.growthBoost=Math.max(n.growthBoost||1,1.5),this.garden.markVisitorTouch(n.id,"butterfly"))}break;case"bonus_water":this.state.water=I.WATER_MAX,this.updateUI();break;case"instant_grow":const o=this.state.plants.filter(n=>n.isWatered&&!y(n.evolutionId));if(o.length>0){const n=o[Math.floor(Math.random()*o.length)];n.growthProgress=1,this.garden.markVisitorTouch(n.id,"rabbit")}break;case"double_harvest":this.doubleHarvestActive=!0;break}this.farmer.speak("plant")}getState(){return this.state}}document.addEventListener("DOMContentLoaded",()=>{const s=new ze;window.game=s,console.log("ðŸŒ» Cozy Garden loaded!")});"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("./sw.js").then(s=>{console.log("âœ… Service Worker registered:",s.scope)}).catch(s=>{console.log("âŒ Service Worker registration failed:",s)})});
